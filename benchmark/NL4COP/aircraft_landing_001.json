{
  "problem_id": "aircraft_landing_001",
  "metadata": {
    "problem_type": "Aircraft Landing Scheduling Problem",
    "difficulty": "simple"
  },
  "problem_description": "An air traffic control center needs to schedule landing times for 10 incoming aircraft at a busy airport with 2 available runways. Each aircraft has specific timing requirements and operational constraints that must be carefully managed to ensure safe operations. The goal is to minimize total delay penalties while maintaining safety standards.\n\nAircraft details and time windows:\n1. Flight AA101: earliest landing 129 minutes, target 155 minutes, latest 559 minutes, penalty costs 10 per minute early/late\n2. Flight UA205: earliest landing 195 minutes, target 258 minutes, latest 744 minutes, penalty costs 10 per minute early/late\n3. Flight DL318: earliest landing 89 minutes, target 98 minutes, latest 510 minutes, penalty costs 30 per minute early/late\n4. Flight SW442: earliest landing 96 minutes, target 106 minutes, latest 521 minutes, penalty costs 30 per minute early/late\n5. Flight JB556: earliest landing 110 minutes, target 123 minutes, latest 555 minutes, penalty costs 30 per minute early/late\n6. Flight NK677: earliest landing 120 minutes, target 135 minutes, latest 576 minutes, penalty costs 30 per minute early/late\n7. Flight B6789: earliest landing 124 minutes, target 138 minutes, latest 577 minutes, penalty costs 30 per minute early/late\n8. Flight AS890: earliest landing 126 minutes, target 140 minutes, latest 573 minutes, penalty costs 30 per minute early/late\n9. Flight F9123: earliest landing 135 minutes, target 150 minutes, latest 591 minutes, penalty costs 30 per minute early/late\n10. Flight WN456: earliest landing 160 minutes, target 180 minutes, latest 657 minutes, penalty costs 30 per minute early/late\n\nSafety separation requirements: When aircraft land on the same runway, they must maintain minimum time gaps between landings. If aircraft i lands before aircraft j on the same runway, the required separation time depends on the aircraft type combinations. Large aircraft (AA101, UA205) need 3 minutes separation from each other, 15 minutes separation from smaller aircraft, while smaller aircraft (all others) need 8 minutes separation between each other. Aircraft on different runways can land simultaneously without separation requirements.\n\nThe air traffic controller must determine the optimal landing time and runway assignment for each aircraft to minimize the total penalty cost while ensuring all timing windows and safety separation requirements are met.",
  "solution_format_description": "Print the following fields: - landing_times: landing time for each aircraft. - runways: runway assignment for each aircraft. - total_penalty: sum of early/late penalties.",
  "structured_data": {
    "num_aircraft": 10,
    "num_runways": 2,
    "flights": [
      [129, 155, 559, 10, 10],
      [195, 258, 744, 10, 10],
      [89, 98, 510, 30, 30],
      [96, 106, 521, 30, 30],
      [110, 123, 555, 30, 30],
      [120, 135, 576, 30, 30],
      [124, 138, 577, 30, 30],
      [126, 140, 573, 30, 30],
      [135, 150, 591, 30, 30],
      [160, 180, 657, 30, 30]
    ],
    "separation_matrix": [
      [99999, 3, 15, 15, 15, 15, 15, 15, 15, 15],
      [3, 99999, 15, 15, 15, 15, 15, 15, 15, 15],
      [15, 15, 99999, 8, 8, 8, 8, 8, 8, 8],
      [15, 15, 8, 99999, 8, 8, 8, 8, 8, 8],
      [15, 15, 8, 8, 99999, 8, 8, 8, 8, 8],
      [15, 15, 8, 8, 8, 99999, 8, 8, 8, 8],
      [15, 15, 8, 8, 8, 8, 99999, 8, 8, 8],
      [15, 15, 8, 8, 8, 8, 8, 99999, 8, 8],
      [15, 15, 8, 8, 8, 8, 8, 8, 99999, 8],
      [15, 15, 8, 8, 8, 8, 8, 8, 8, 99999]
    ]
  },
  "reference_solution": {
    "landing_times": [155, 258, 98, 106, 123, 132, 138, 140, 150, 180],
    "runways": [2, 2, 1, 1, 2, 2, 1, 2, 1, 1],
    "total_penalty": 90
  },
  "solver_code": "from cpmpy import *\nimport json\n\nEARLIEST = 0\nTARGET = 1\nLATEST = 2\nEARLY_PENALTY = 3\nLATE_PENALTY = 4\n\nflights = [\n    [129, 155, 559, 10, 10],\n    [195, 258, 744, 10, 10],\n    [89, 98, 510, 30, 30],\n    [96, 106, 521, 30, 30],\n    [110, 123, 555, 30, 30],\n    [120, 135, 576, 30, 30],\n    [124, 138, 577, 30, 30],\n    [126, 140, 573, 30, 30],\n    [135, 150, 591, 30, 30],\n    [160, 180, 657, 30, 30]\n]\nseparation_matrix = [\n    [99999, 3, 15, 15, 15, 15, 15, 15, 15, 15],\n    [3, 99999, 15, 15, 15, 15, 15, 15, 15, 15],\n    [15, 15, 99999, 8, 8, 8, 8, 8, 8, 8],\n    [15, 15, 8, 99999, 8, 8, 8, 8, 8, 8],\n    [15, 15, 8, 8, 99999, 8, 8, 8, 8, 8],\n    [15, 15, 8, 8, 8, 99999, 8, 8, 8, 8],\n    [15, 15, 8, 8, 8, 8, 99999, 8, 8, 8],\n    [15, 15, 8, 8, 8, 8, 8, 99999, 8, 8],\n    [15, 15, 8, 8, 8, 8, 8, 8, 99999, 8],\n    [15, 15, 8, 8, 8, 8, 8, 8, 8, 99999]\n]\nnum_aircraft = 10\nnum_runways = 2\n\nmodel = Model()\nlanding_times = intvar(0, 1000, shape=num_aircraft)\nrunways = intvar(1, num_runways, shape=num_aircraft)\n\nfor i in range(num_aircraft):\n    model += landing_times[i] >= flights[i][EARLIEST]\n    model += landing_times[i] <= flights[i][LATEST]\n\nfor i in range(num_aircraft):\n    for j in range(num_aircraft):\n        if i != j:\n            model += ((runways[i] == runways[j]) & (landing_times[i] <= landing_times[j])).implies(\n                landing_times[j] - landing_times[i] >= separation_matrix[i][j]\n            )\n\npenalty_vars = intvar(0, 100000, shape=num_aircraft)\nfor i in range(num_aircraft):\n    target = flights[i][TARGET]\n    early_penalty = flights[i][EARLY_PENALTY]\n    late_penalty = flights[i][LATE_PENALTY]\n    early_cost = (target - landing_times[i]) * early_penalty\n    late_cost = (landing_times[i] - target) * late_penalty\n    model += penalty_vars[i] >= early_cost\n    model += penalty_vars[i] >= late_cost\n    model += penalty_vars[i] >= 0\n\ntotal_penalty = sum(penalty_vars)\nmodel.minimize(total_penalty)\n\nif model.solve():\n    result = {\n        \"landing_times\": [int(landing_times[i].value()) for i in range(num_aircraft)],\n        \"runways\": [int(runways[i].value()) for i in range(num_aircraft)],\n        \"total_penalty\": int(total_penalty.value())\n    }\n    print(json.dumps(result))\nelse:\n    print(json.dumps({\"error\": \"No solution found\"}))",
  "evaluation_function": "def evaluate(candidate_solution, structured_data, reference_solution):\n    import json\n    \n    EARLIEST = 0\n    TARGET = 1\n    LATEST = 2\n    EARLY_PENALTY = 3\n    LATE_PENALTY = 4\n    \n    try:\n        solution = json.loads(candidate_solution) if isinstance(candidate_solution, str) else candidate_solution\n    except:\n        return {\"is_valid\": False, \"validation_errors\": [\"Invalid JSON format\"], \"optimality_score\": 0.0}\n    \n    required_fields = [\"landing_times\", \"runways\", \"total_penalty\"]\n    missing = [f for f in required_fields if solution is None or f not in solution]\n    if missing:\n        return {\"is_valid\": False, \"validation_errors\": [f\"Missing fields: {missing}\"], \"optimality_score\": 0.0}\n    \n    try:\n        landing_times = solution[\"landing_times\"]\n        runways = solution[\"runways\"]\n        total_penalty = solution[\"total_penalty\"]\n        \n        num_aircraft = structured_data[\"num_aircraft\"]\n        num_runways = structured_data[\"num_runways\"]\n        flights = structured_data[\"flights\"]\n        separation_matrix = structured_data[\"separation_matrix\"]\n        errors = []\n        \n        if len(landing_times) != num_aircraft:\n            errors.append(f\"landing_times length mismatch: expected {num_aircraft}, got {len(landing_times)}\")\n        \n        if len(runways) != num_aircraft:\n            errors.append(f\"runways length mismatch: expected {num_aircraft}, got {len(runways)}\")\n        \n        if errors:\n            return {\"is_valid\": False, \"validation_errors\": errors, \"optimality_score\": 0.0}\n        \n        for i in range(num_aircraft):\n            landing_time = landing_times[i]\n            earliest = flights[i][EARLIEST]\n            latest = flights[i][LATEST]\n            if landing_time < earliest or landing_time > latest:\n                errors.append(f\"Flight {i}: landing time {landing_time} outside window [{earliest}, {latest}]\")\n        \n        for i in range(num_aircraft):\n            if runways[i] < 1 or runways[i] > num_runways:\n                errors.append(f\"Flight {i}: invalid runway {runways[i]}, must be between 1 and {num_runways}\")\n        \n        for i in range(num_aircraft):\n            for j in range(num_aircraft):\n                if i != j and runways[i] == runways[j]:\n                    if landing_times[i] <= landing_times[j]:\n                        required_gap = separation_matrix[i][j]\n                        actual_gap = landing_times[j] - landing_times[i]\n                        if actual_gap < required_gap:\n                            errors.append(f\"Separation violation: flights {i} and {j} on runway {runways[i]} (gap: {actual_gap}, required: {required_gap})\")\n        \n        calculated_penalty = 0.0\n        for i in range(num_aircraft):\n            landing_time = landing_times[i]\n            target = flights[i][TARGET]\n            if landing_time < target:\n                calculated_penalty += (target - landing_time) * flights[i][EARLY_PENALTY]\n            elif landing_time > target:\n                calculated_penalty += (landing_time - target) * flights[i][LATE_PENALTY]\n        \n        if abs(calculated_penalty - total_penalty) > 1e-6:\n            errors.append(f\"Penalty inconsistency: calculated {calculated_penalty}, declared {total_penalty}\")\n        \n        optimal_penalty = reference_solution[\"total_penalty\"]\n        if optimal_penalty == 0:\n            optimality_score = 1.0 if total_penalty == 0 else 0.0\n        else:\n            gap = abs(optimal_penalty - total_penalty) / abs(optimal_penalty)\n            optimality_score = max(0, 1 - gap)\n        \n        return {\n            \"is_valid\": len(errors) == 0,\n            \"validation_errors\": errors,\n            \"optimality_score\": optimality_score\n        }\n        \n    except Exception as e:\n        return {\"is_valid\": False, \"validation_errors\": [\"Format error in solution data\"], \"optimality_score\": 0.0}"
}
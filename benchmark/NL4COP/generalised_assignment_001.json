{
  "problem_id": "generalised_assignment_001",
  "metadata": {
    "problem_type": "Generalised Assignment Problem",
    "difficulty": "simple"
  },
  "problem_description": "Within the complex operational framework of a global consulting enterprise, five distinct knowledge domains each maintain specialized resource pools with varying capacity thresholds: the Alpha division can sustain thirty-six engagement units, Beta division thirty-four units, Gamma division thirty-eight units, Delta division twenty-seven units, and Epsilon division thirty-three units. Fifteen client initiatives requiring strategic intervention present themselves sequentially, each exhibiting unique value generation characteristics when undertaken by different knowledge domains. For instance, the initial client engagement would yield seventeen value units through Alpha, twenty-three through Beta, sixteen through Gamma, nineteen through Delta, and eighteen through Epsilon, while consuming eight, fifteen, twenty-one, twenty, and eight resource units respectively. This pattern of asymmetric value-resource relationships continues throughout the engagement portfolio, with the second initiative showing values of twenty-one, sixteen, twenty, nineteen, and nineteen units across the five domains, requiring fifteen, seven, twenty, eleven, and thirteen resource units correspondingly. The third engagement demonstrates yet another configuration with values of twenty-two, twenty-one, sixteen, twenty-two, and fifteen units, consuming fourteen, twenty-three, six, eight, and thirteen resource units respectively. Subsequent engagements follow similarly intricate patterns where the fourth engagement presents values of eighteen, sixteen, twenty-five, twenty-two, and fifteen units with resource requirements of twenty-three, twenty-two, twenty-two, fourteen, and thirteen units; the fifth shows values of twenty-four, seventeen, twenty-four, twenty, and twenty-one units requiring eight, eleven, twenty-four, nine, and ten resource units; the sixth engagement yields fifteen, sixteen, sixteen, sixteen, and twenty-five value units while consuming sixteen, eleven, ten, five, and twenty resource units; the seventh initiative offers values of twenty, nineteen, seventeen, nineteen, and sixteen units with respective resource consumptions of eight, twelve, twenty-four, six, and twenty-five units; the eighth engagement provides values of eighteen, twenty-five, nineteen, seventeen, and sixteen units requiring twenty-five, ten, nine, nineteen, and sixteen resource units; the ninth demonstrates values of nineteen, eighteen, nineteen, twenty-one, and twenty-three units with resource needs of nine, seventeen, twenty-one, nineteen, and sixteen units; the tenth engagement shows values of eighteen, twenty-one, eighteen, nineteen, and fifteen units consuming seventeen, sixteen, fourteen, seven, and seventeen resource units; the eleventh initiative yields values of sixteen, seventeen, twenty, twenty-five, and twenty-two units requiring twenty-five, seven, eleven, six, and ten resource units; the twelfth engagement offers values of twenty-two, fifteen, sixteen, twenty-three, and seventeen units with resource consumptions of fifteen, sixteen, fourteen, six, and ten units; the thirteenth engagement demonstrates values of twenty-four, twenty-five, seventeen, twenty-five, and nineteen units requiring ten, ten, eleven, thirteen, and five resource units; the fourteenth initiative presents values of twenty-four, seventeen, twenty-one, twenty-five, and twenty-two units consuming eight, eighteen, nineteen, nine, and twelve resource units; and finally, the fifteenth engagement shows values of sixteen, twenty-four, twenty-four, twenty-five, and twenty-four units with resource requirements of twenty-four, twenty-two, sixteen, eighteen, and twenty-three units respectively. The enterprise therefore faces the strategic challenge of determining how to allocate these fifteen client initiatives across the five knowledge domains to achieve the greatest possible total value generation, naturally ensuring that each initiative is handled by only one domain and that no domain becomes overburdened beyond its resource capabilities.",
  "solution_format_description": "Print the following fields: - initiative_domain_assignments: domain assignment for each initiative. - total_value_generation: total value generated across all initiatives.",
  "structured_data": {
    "num_domains": 5,
    "num_initiatives": 15,
    "value_generation_matrix": [
      [17, 21, 22, 18, 24, 15, 20, 18, 19, 18, 16, 22, 24, 24, 16],
      [23, 16, 21, 16, 17, 16, 19, 25, 18, 21, 17, 15, 25, 17, 24],
      [16, 20, 16, 25, 24, 16, 17, 19, 19, 18, 20, 16, 17, 21, 24],
      [19, 19, 22, 22, 20, 16, 19, 17, 21, 19, 25, 23, 25, 25, 25],
      [18, 19, 15, 15, 21, 25, 16, 16, 23, 15, 22, 17, 19, 22, 24]
    ],
    "resource_consumption_matrix": [
      [8, 15, 14, 23, 8, 16, 8, 25, 9, 17, 25, 15, 10, 8, 24],
      [15, 7, 23, 22, 11, 11, 12, 10, 17, 16, 7, 16, 10, 18, 22],
      [21, 20, 6, 22, 24, 10, 24, 9, 21, 14, 11, 14, 11, 19, 16],
      [20, 11, 8, 14, 9, 5, 6, 19, 19, 7, 6, 6, 13, 9, 18],
      [8, 13, 13, 13, 10, 20, 25, 16, 16, 17, 10, 10, 5, 12, 23]
    ],
    "domain_capacities": [36, 34, 38, 27, 33]
  },
  "reference_solution": {
    "initiative_domain_assignments": [2, 2, 4, 3, 1, 5, 1, 2, 1, 4, 4, 4, 1, 5, 3],
    "total_value_generation": 336
  },
  "solver_code": "from cpmpy import *\nimport json\n\nnum_domains = 5\nnum_initiatives = 15\n\nvalue_generation_matrix = [\n    [17, 21, 22, 18, 24, 15, 20, 18, 19, 18, 16, 22, 24, 24, 16],\n    [23, 16, 21, 16, 17, 16, 19, 25, 18, 21, 17, 15, 25, 17, 24],\n    [16, 20, 16, 25, 24, 16, 17, 19, 19, 18, 20, 16, 17, 21, 24],\n    [19, 19, 22, 22, 20, 16, 19, 17, 21, 19, 25, 23, 25, 25, 25],\n    [18, 19, 15, 15, 21, 25, 16, 16, 23, 15, 22, 17, 19, 22, 24]\n]\n\nresource_consumption_matrix = [\n    [8, 15, 14, 23, 8, 16, 8, 25, 9, 17, 25, 15, 10, 8, 24],\n    [15, 7, 23, 22, 11, 11, 12, 10, 17, 16, 7, 16, 10, 18, 22],\n    [21, 20, 6, 22, 24, 10, 24, 9, 21, 14, 11, 14, 11, 19, 16],\n    [20, 11, 8, 14, 9, 5, 6, 19, 19, 7, 6, 6, 13, 9, 18],\n    [8, 13, 13, 13, 10, 20, 25, 16, 16, 17, 10, 10, 5, 12, 23]\n]\n\ndomain_capacities = [36, 34, 38, 27, 33]\n\nmodel = Model()\ninitiative_domain_assignments = intvar(1, num_domains, shape=num_initiatives)\n\nfor i in range(num_domains):\n    domain_resource = sum(resource_consumption_matrix[i][j] * (initiative_domain_assignments[j] == i + 1) for j in range(num_initiatives))\n    model += domain_resource <= domain_capacities[i]\n\ntotal_value_generation = sum(sum(value_generation_matrix[i][j] * (initiative_domain_assignments[j] == i + 1) for i in range(num_domains)) for j in range(num_initiatives))\nmodel.maximize(total_value_generation)\n\nif model.solve():\n    result = {\n        \"initiative_domain_assignments\": [int(initiative_domain_assignments[j].value()) for j in range(num_initiatives)],\n        \"total_value_generation\": int(total_value_generation.value())\n    }\n    print(json.dumps(result))\nelse:\n    print(json.dumps({\"error\": \"No solution found\"}))",
  "evaluation_function": "def evaluate(candidate_solution, structured_data, reference_solution):\n    import json\n    \n    try:\n        solution = json.loads(candidate_solution) if isinstance(candidate_solution, str) else candidate_solution\n    except:\n        return {\"is_valid\": False, \"validation_errors\": [\"Invalid JSON format\"], \"optimality_score\": 0.0}\n    \n    required_fields = [\"initiative_domain_assignments\", \"total_value_generation\"]\n    missing = [f for f in required_fields if solution is None or f not in solution]\n    if missing:\n        return {\"is_valid\": False, \"validation_errors\": [f\"Missing fields: {missing}\"], \"optimality_score\": 0.0}\n    \n    try:\n        assignments = solution[\"initiative_domain_assignments\"]\n        total_value_generation = solution[\"total_value_generation\"]\n        \n        num_domains = structured_data[\"num_domains\"]\n        num_initiatives = structured_data[\"num_initiatives\"]\n        resource_consumption_matrix = structured_data[\"resource_consumption_matrix\"]\n        domain_capacities = structured_data[\"domain_capacities\"]\n        errors = []\n        \n        if len(assignments) != num_initiatives:\n            errors.append(f\"initiative_domain_assignments length mismatch: expected {num_initiatives}, got {len(assignments)}\")\n        \n        for i, domain in enumerate(assignments):\n            if not isinstance(domain, int) or domain < 1 or domain > num_domains:\n                errors.append(f\"Initiative {i}: invalid domain assignment {domain}, must be between 1 and {num_domains}\")\n        \n        if len(errors) > 0:\n            return {\"is_valid\": False, \"validation_errors\": errors, \"optimality_score\": 0.0}\n        \n        domain_loads = [0] * num_domains\n        for j in range(num_initiatives):\n            domain = assignments[j] - 1\n            domain_loads[domain] += resource_consumption_matrix[domain][j]\n        \n        for i in range(num_domains):\n            if domain_loads[i] > domain_capacities[i]:\n                errors.append(f\"Capacity constraint violated for domain {i+1}: resource consumption {domain_loads[i]} exceeds capacity {domain_capacities[i]}\")\n        \n        if len(errors) > 0:\n            optimality_score = 0.0\n        else:\n            optimal_value = reference_solution[\"total_value_generation\"]\n            if optimal_value == 0:\n                optimality_score = 1.0 if total_value_generation == 0 else 0.0\n            else:\n                gap = abs(optimal_value - total_value_generation) / abs(optimal_value)\n                optimality_score = max(0, 1 - gap)\n        \n        return {\n            \"is_valid\": len(errors) == 0,\n            \"validation_errors\": errors,\n            \"optimality_score\": optimality_score\n        }\n        \n    except Exception:\n        return {\"is_valid\": False, \"validation_errors\": [\"Format error in solution data\"], \"optimality_score\": 0.0}"
}
{
  "problem_id": "mdmkp_003",
  "metadata": {
    "problem_type": "Multi-Demand Multidimensional Knapsack Problem",
    "difficulty": "hard"
  },
  "problem_description": "Within a comprehensive disaster relief framework, an international humanitarian organization must optimize project selection across 50 distinct relief initiatives. Each initiative displays unique resource consumption patterns and delivers specific humanitarian impact across multiple operational domains. The system operates under quintuple resource constraints: financial expenditure limited to $5000, volunteer time allocation capped at 2500 hours, equipment availability bounded by 1200 units, specialist personnel deployment restricted to 100 staff members, and a minimum community outreach requirement of 700 engagement points. The relief initiatives demonstrate the following characteristics: 1. Emergency Medical Response: Requires $75, 32 volunteer hours, 18 equipment units, 5 staff members, generates 22 engagement points, and delivers 95 impact units; 2. Water Purification Systems: Requires $120, 55 volunteer hours, 28 equipment units, 3 staff members, generates 35 engagement points, and delivers 145 impact units; 3. Food Distribution Network: Requires $98, 42 volunteer hours, 22 equipment units, 4 staff members, generates 28 engagement points, and delivers 118 impact units; 4. Shelter Construction Program: Requires $156, 68 volunteer hours, 35 equipment units, 6 staff members, generates 42 engagement points, and delivers 178 impact units; 5. Mobile Health Clinics: Requires $83, 37 volunteer hours, 19 equipment units, 2 staff members, generates 25 engagement points, and delivers 102 impact units; 6. Educational Support Services: Requires $201, 89 volunteer hours, 45 equipment units, 8 staff members, generates 55 engagement points, and delivers 225 impact units; 7. Sanitation Infrastructure: Requires $112, 48 volunteer hours, 26 equipment units, 4 staff members, generates 32 engagement points, and delivers 135 impact units; 8. Mental Health Counseling: Requires $167, 74 volunteer hours, 38 equipment units, 7 staff members, generates 46 engagement points, and delivers 192 impact units; 9. Emergency Communications: Requires $91, 39 volunteer hours, 20 equipment units, 3 staff members, generates 26 engagement points, and delivers 110 impact units; 10. Logistics Coordination: Requires $134, 61 volunteer hours, 31 equipment units, 5 staff members, generates 38 engagement points, and delivers 158 impact units; 11. Child Protection Services: Requires $189, 85 volunteer hours, 43 equipment units, 6 staff members, generates 52 engagement points, and delivers 215 impact units; 12. Agricultural Support: Requires $67, 29 volunteer hours, 15 equipment units, 2 staff members, generates 19 engagement points, and delivers 82 impact units; 13. Vocational Training: Requires $145, 66 volunteer hours, 34 equipment units, 5 staff members, generates 41 engagement points, and delivers 168 impact units; 14. Community Health Education: Requires $103, 45 volunteer hours, 24 equipment units, 4 staff members, generates 29 engagement points, and delivers 125 impact units; 15. Environmental Cleanup: Requires $178, 81 volunteer hours, 41 equipment units, 7 staff members, generates 49 engagement points, and delivers 205 impact units; 16. Infrastructure Rehabilitation: Requires $88, 38 volunteer hours, 20 equipment units, 3 staff members, generates 24 engagement points, and delivers 108 impact units; 17. Local Partner Support: Requires $152, 70 volunteer hours, 36 equipment units, 6 staff members, generates 44 engagement points, and delivers 175 impact units; 18. Security Operations: Requires $127, 57 volunteer hours, 29 equipment units, 5 staff members, generates 36 engagement points, and delivers 152 impact units; 19. Nutrition Programs: Requires $196, 87 volunteer hours, 44 equipment units, 8 staff members, generates 53 engagement points, and delivers 222 impact units; 20. Women's Empowerment: Requires $71, 31 volunteer hours, 16 equipment units, 2 staff members, generates 20 engagement points, and delivers 88 impact units; 21. Elderly Care Services: Requires $139, 63 volunteer hours, 32 equipment units, 5 staff members, generates 39 engagement points, and delivers 162 impact units; 22. Disability Inclusion: Requires $163, 73 volunteer hours, 37 equipment units, 6 staff members, generates 45 engagement points, and delivers 185 impact units; 23. Youth Development: Requires $109, 47 volunteer hours, 25 equipment units, 4 staff members, generates 31 engagement points, and delivers 132 impact units; 24. Cultural Preservation: Requires $181, 82 volunteer hours, 42 equipment units, 7 staff members, generates 50 engagement points, and delivers 210 impact units; 25. Economic Recovery: Requires $95, 41 volunteer hours, 21 equipment units, 3 staff members, generates 27 engagement points, and delivers 115 impact units; 26. Technology Access: Requires $148, 67 volunteer hours, 35 equipment units, 5 staff members, generates 43 engagement points, and delivers 172 impact units; 27. Rural Development: Requires $123, 54 volunteer hours, 28 equipment units, 4 staff members, generates 34 engagement points, and delivers 148 impact units; 28. Urban Renewal: Requires $171, 78 volunteer hours, 40 equipment units, 6 staff members, generates 48 engagement points, and delivers 198 impact units; 29. Climate Adaptation: Requires $79, 34 volunteer hours, 17 equipment units, 3 staff members, generates 23 engagement points, and delivers 98 impact units; 30. Digital Literacy: Requires $159, 72 volunteer hours, 37 equipment units, 5 staff members, generates 45 engagement points, and delivers 182 impact units; 31. Microfinance Support: Requires $115, 51 volunteer hours, 26 equipment units, 4 staff members, generates 33 engagement points, and delivers 142 impact units; 32. Research Innovation: Requires $186, 84 volunteer hours, 43 equipment units, 7 staff members, generates 51 engagement points, and delivers 218 impact units; 33. Peace Building: Requires $63, 27 volunteer hours, 14 equipment units, 2 staff members, generates 18 engagement points, and delivers 78 impact units; 34. Gender Equality: Requires $141, 64 volunteer hours, 33 equipment units, 5 staff members, generates 40 engagement points, and delivers 165 impact units; 35. Human Rights Advocacy: Requires $106, 46 volunteer hours, 24 equipment units, 4 staff members, generates 30 engagement points, and delivers 128 impact units; 36. Disaster Preparedness: Requires $169, 76 volunteer hours, 39 equipment units, 6 staff members, generates 47 engagement points, and delivers 195 impact units; 37. Refugee Assistance: Requires $93, 40 volunteer hours, 21 equipment units, 3 staff members, generates 26 engagement points, and delivers 112 impact units; 38. Crisis Management: Requires $154, 69 volunteer hours, 35 equipment units, 5 staff members, generates 42 engagement points, and delivers 170 impact units; 39. Community Resilience: Requires $129, 58 volunteer hours, 30 equipment units, 5 staff members, generates 37 engagement points, and delivers 155 impact units; 40. Legal Aid Services: Requires $193, 86 volunteer hours, 44 equipment units, 8 staff members, generates 52 engagement points, and delivers 220 impact units; 41. Monitoring Evaluation: Requires $69, 30 volunteer hours, 15 equipment units, 2 staff members, generates 19 engagement points, and delivers 85 impact units; 42. Knowledge Sharing: Requires $136, 62 volunteer hours, 32 equipment units, 5 staff members, generates 38 engagement points, and delivers 160 impact units; 43. Child Protection: Requires $161, 73 volunteer hours, 37 equipment units, 6 staff members, generates 44 engagement points, and delivers 180 impact units; 44. Social Cohesion: Requires $111, 49 volunteer hours, 25 equipment units, 4 staff members, generates 32 engagement points, and delivers 138 impact units; 45. Capacity Building: Requires $179, 81 volunteer hours, 42 equipment units, 7 staff members, generates 49 engagement points, and delivers 208 impact units; 46. Innovation Hubs: Requires $97, 42 volunteer hours, 22 equipment units, 3 staff members, generates 27 engagement points, and delivers 117 impact units; 47. Volunteer Coordination: Requires $147, 67 volunteer hours, 34 equipment units, 5 staff members, generates 41 engagement points, and delivers 170 impact units; 48. Emergency Response: Requires $121, 53 volunteer hours, 27 equipment units, 4 staff members, generates 33 engagement points, and delivers 145 impact units; 49. Sustainable Recovery: Requires $168, 75 volunteer hours, 39 equipment units, 6 staff members, generates 46 engagement points, and delivers 190 impact units; 50. Community Development: Requires $157, 71 volunteer hours, 36 equipment units, 5 staff members, generates 43 engagement points, and delivers 177 impact units. Which combination of relief initiatives should be selected to maximize total humanitarian impact while respecting all resource constraints and meeting the minimum community engagement requirement?",
  "solution_format_description": "Print the following fields: - selected: selection status for each project. - total_value: total humanitarian impact. - total_resources: list resource usage with budget spent, volunteer hours, equipment units, staff used, engagement points.",
  "structured_data": {
    "projects": [
      [75, 32, 18, 5, 22, 95],
      [120, 55, 28, 3, 35, 145],
      [98, 42, 22, 4, 28, 118],
      [156, 68, 35, 6, 42, 178],
      [83, 37, 19, 2, 25, 102],
      [201, 89, 45, 8, 55, 225],
      [112, 48, 26, 4, 32, 135],
      [167, 74, 38, 7, 46, 192],
      [91, 39, 20, 3, 26, 110],
      [134, 61, 31, 5, 38, 158],
      [189, 85, 43, 6, 52, 215],
      [67, 29, 15, 2, 19, 82],
      [145, 66, 34, 5, 41, 168],
      [103, 45, 24, 4, 29, 125],
      [178, 81, 41, 7, 49, 205],
      [88, 38, 20, 3, 24, 108],
      [152, 70, 36, 6, 44, 175],
      [127, 57, 29, 5, 36, 152],
      [196, 87, 44, 8, 53, 222],
      [71, 31, 16, 2, 20, 88],
      [139, 63, 32, 5, 39, 162],
      [163, 73, 37, 6, 45, 185],
      [109, 47, 25, 4, 31, 132],
      [181, 82, 42, 7, 50, 210],
      [95, 41, 21, 3, 27, 115],
      [148, 67, 35, 5, 43, 172],
      [123, 54, 28, 4, 34, 148],
      [171, 78, 40, 6, 48, 198],
      [79, 34, 17, 3, 23, 98],
      [159, 72, 37, 5, 45, 182],
      [115, 51, 26, 4, 33, 142],
      [186, 84, 43, 7, 51, 218],
      [63, 27, 14, 2, 18, 78],
      [141, 64, 33, 5, 40, 165],
      [106, 46, 24, 4, 30, 128],
      [169, 76, 39, 6, 47, 195],
      [93, 40, 21, 3, 26, 112],
      [154, 69, 35, 5, 42, 170],
      [129, 58, 30, 5, 37, 155],
      [193, 86, 44, 8, 52, 220],
      [69, 30, 15, 2, 19, 85],
      [136, 62, 32, 5, 38, 160],
      [161, 73, 37, 6, 44, 180],
      [111, 49, 25, 4, 32, 138],
      [179, 81, 42, 7, 49, 208],
      [97, 42, 22, 3, 27, 117],
      [147, 67, 34, 5, 41, 170],
      [121, 53, 27, 4, 33, 145],
      [168, 75, 39, 6, 46, 190],
      [157, 71, 36, 5, 43, 177]
    ],
    "constraints": [5000, 2500, 1200, 100, 700]
  },
  "reference_solution": {
    "selected": [0, 1, 0, 0, 1, 0, 1, 0, 1, 0, 1, 1, 1, 0, 0, 1, 0, 0, 0, 1, 1, 0, 0, 0, 1, 1, 1, 1, 0, 1, 1, 0, 1, 1, 0, 0, 1, 1, 0, 0, 1, 0, 0, 1, 0, 1, 1, 1, 0, 1],
    "total_value": 3629,
    "total_resources": [3069, 1366, 702, 100, 864]
  },
  "solver_code": "from cpmpy import *\nimport json\n\nprojects = [\n    [75, 32, 18, 5, 22, 95],\n    [120, 55, 28, 3, 35, 145],\n    [98, 42, 22, 4, 28, 118],\n    [156, 68, 35, 6, 42, 178],\n    [83, 37, 19, 2, 25, 102],\n    [201, 89, 45, 8, 55, 225],\n    [112, 48, 26, 4, 32, 135],\n    [167, 74, 38, 7, 46, 192],\n    [91, 39, 20, 3, 26, 110],\n    [134, 61, 31, 5, 38, 158],\n    [189, 85, 43, 6, 52, 215],\n    [67, 29, 15, 2, 19, 82],\n    [145, 66, 34, 5, 41, 168],\n    [103, 45, 24, 4, 29, 125],\n    [178, 81, 41, 7, 49, 205],\n    [88, 38, 20, 3, 24, 108],\n    [152, 70, 36, 6, 44, 175],\n    [127, 57, 29, 5, 36, 152],\n    [196, 87, 44, 8, 53, 222],\n    [71, 31, 16, 2, 20, 88],\n    [139, 63, 32, 5, 39, 162],\n    [163, 73, 37, 6, 45, 185],\n    [109, 47, 25, 4, 31, 132],\n    [181, 82, 42, 7, 50, 210],\n    [95, 41, 21, 3, 27, 115],\n    [148, 67, 35, 5, 43, 172],\n    [123, 54, 28, 4, 34, 148],\n    [171, 78, 40, 6, 48, 198],\n    [79, 34, 17, 3, 23, 98],\n    [159, 72, 37, 5, 45, 182],\n    [115, 51, 26, 4, 33, 142],\n    [186, 84, 43, 7, 51, 218],\n    [63, 27, 14, 2, 18, 78],\n    [141, 64, 33, 5, 40, 165],\n    [106, 46, 24, 4, 30, 128],\n    [169, 76, 39, 6, 47, 195],\n    [93, 40, 21, 3, 26, 112],\n    [154, 69, 35, 5, 42, 170],\n    [129, 58, 30, 5, 37, 155],\n    [193, 86, 44, 8, 52, 220],\n    [69, 30, 15, 2, 19, 85],\n    [136, 62, 32, 5, 38, 160],\n    [161, 73, 37, 6, 44, 180],\n    [111, 49, 25, 4, 32, 138],\n    [179, 81, 42, 7, 49, 208],\n    [97, 42, 22, 3, 27, 117],\n    [147, 67, 34, 5, 41, 170],\n    [121, 53, 27, 4, 33, 145],\n    [168, 75, 39, 6, 46, 190],\n    [157, 71, 36, 5, 43, 177]\n]\n\nconstraints = [5000, 2500, 1200, 100, 700]\n\nnum_projects = len(projects)\nbudget_limit = constraints[0]\nvolunteer_limit = constraints[1]\nequipment_limit = constraints[2]\nstaff_limit = constraints[3]\nengagement_requirement = constraints[4]\n\nx = boolvar(shape=num_projects)\n\nmodel = Model()\n\nmodel += sum(projects[i][0] * x[i] for i in range(num_projects)) <= budget_limit\nmodel += sum(projects[i][1] * x[i] for i in range(num_projects)) <= volunteer_limit\nmodel += sum(projects[i][2] * x[i] for i in range(num_projects)) <= equipment_limit\nmodel += sum(projects[i][3] * x[i] for i in range(num_projects)) <= staff_limit\nmodel += sum(projects[i][4] * x[i] for i in range(num_projects)) >= engagement_requirement\n\nmodel.maximize(sum(projects[i][5] * x[i] for i in range(num_projects)))\n\nif model.solve():\n    selected = [int(x[i].value()) for i in range(num_projects)]\n    total_value = sum(projects[i][5] * selected[i] for i in range(num_projects))\n    total_budget = sum(projects[i][0] * selected[i] for i in range(num_projects))\n    total_volunteer = sum(projects[i][1] * selected[i] for i in range(num_projects))\n    total_equipment = sum(projects[i][2] * selected[i] for i in range(num_projects))\n    total_staff = sum(projects[i][3] * selected[i] for i in range(num_projects))\n    total_engagement = sum(projects[i][4] * selected[i] for i in range(num_projects))\n    \n    result = {\n        \"selected\": selected,\n        \"total_value\": total_value,\n        \"total_resources\": [total_budget, total_volunteer, total_equipment, total_staff, total_engagement]\n    }\n    print(json.dumps(result))\nelse:\n    print(\"No solution found\")",
  "evaluation_function": "def evaluate(candidate_solution, structured_data, reference_solution):\n    import json\n    \n    try:\n        solution = json.loads(candidate_solution) if isinstance(candidate_solution, str) else candidate_solution\n    except:\n        return {\"is_valid\": False, \"validation_errors\": [\"Invalid JSON format\"], \"optimality_score\": 0.0}\n    \n    required_fields = [\"selected\", \"total_value\", \"total_resources\"]\n    missing = [f for f in required_fields if solution is None or f not in solution]\n    if missing:\n        return {\"is_valid\": False, \"validation_errors\": [f\"Missing fields: {missing}\"], \"optimality_score\": 0.0}\n    \n    try:\n        selected = solution[\"selected\"]\n        total_value = solution[\"total_value\"]\n        total_resources = solution[\"total_resources\"]\n        \n        projects = structured_data[\"projects\"]\n        constraints = structured_data[\"constraints\"]\n        num_projects = len(projects)\n        \n        budget_limit = constraints[0]\n        volunteer_limit = constraints[1]\n        equipment_limit = constraints[2]\n        staff_limit = constraints[3]\n        engagement_requirement = constraints[4]\n        \n        total_budget = total_resources[0]\n        total_volunteer = total_resources[1]\n        total_equipment = total_resources[2]\n        total_staff = total_resources[3]\n        total_engagement = total_resources[4]\n        \n        errors = []\n        \n        if len(selected) != num_projects:\n            errors.append(f\"Array length mismatch: expected {num_projects}, got {len(selected)}\")\n\n        if total_budget > budget_limit:\n            errors.append(f\"Budget constraint violated: {total_budget} > {budget_limit}\")\n\n        if total_volunteer > volunteer_limit:\n            errors.append(f\"Volunteer hours constraint violated: {total_volunteer} > {volunteer_limit}\")\n\n        if total_equipment > equipment_limit:\n            errors.append(f\"Equipment units constraint violated: {total_equipment} > {equipment_limit}\")\n            \n        if total_staff > staff_limit:\n            errors.append(f\"Staff members constraint violated: {total_staff} > {staff_limit}\")\n\n        if total_engagement < engagement_requirement:\n            errors.append(f\"Engagement points requirement not met: {total_engagement} < {engagement_requirement}\")\n\n        if len(errors) > 0:\n            return {\n                \"is_valid\": False,\n                \"validation_errors\": errors,\n                \"optimality_score\": 0.0\n            }\n\n        optimal_value = reference_solution[\"total_value\"]\n        if optimal_value == 0:\n            optimality_score = 1.0 if total_value == 0 else 0.0\n        else:\n            gap = abs(optimal_value - total_value) / abs(optimal_value)\n            optimality_score = max(0, 1 - gap)\n\n        return {\n            \"is_valid\": True,\n            \"validation_errors\": [],\n            \"optimality_score\": optimality_score\n        }\n\n    except Exception as e:\n        return {\"is_valid\": False, \"validation_errors\": [\"Format error in solution data\"], \"optimality_score\": 0.0}"
}
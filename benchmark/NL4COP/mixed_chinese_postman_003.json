{
  "problem_id": "mixed_chinese_postman_003",
  "metadata": {
    "problem_type": "Mixed Chinese Postman Problem",
    "difficulty": "hard"
  },
  "problem_description": "A major international airport needs to optimize its baggage handling system maintenance route across 20 key service stations in the terminal complex. There are 35 conveyor segments that require maintenance, each with specific maintenance and travel times. The maintenance requirements are: 1. One-way conveyor from station 0 to 1: 8 minutes maintenance time, 3 minutes travel time 2. One-way conveyor from station 1 to 2: 6 minutes maintenance time, 2 minutes travel time 3. Two-way conveyor between stations 2 and 3: 7 minutes maintenance time (total), 4 minutes travel time in either direction 4. One-way conveyor from station 3 to 4: 5 minutes maintenance time, 1 minute travel time 5. Two-way conveyor between stations 4 and 5: 9 minutes maintenance time (total), 2 minutes travel time in either direction 6. One-way conveyor from station 5 to 6: 4 minutes maintenance time, 3 minutes travel time 7. Two-way conveyor between stations 6 and 7: 8 minutes maintenance time (total), 5 minutes travel time in either direction 8. One-way conveyor from station 7 to 8: 6 minutes maintenance time, 2 minutes travel time 9. Two-way conveyor between stations 8 and 9: 7 minutes maintenance time (total), 3 minutes travel time in either direction 10. One-way conveyor from station 9 to 10: 5 minutes maintenance time, 2 minutes travel time 11. Two-way conveyor between stations 10 and 11: 8 minutes maintenance time (total), 4 minutes travel time in either direction 12. One-way conveyor from station 11 to 12: 4 minutes maintenance time, 1 minute travel time 13. Two-way conveyor between stations 12 and 13: 6 minutes maintenance time (total), 3 minutes travel time in either direction 14. One-way conveyor from station 13 to 14: 7 minutes maintenance time, 2 minutes travel time 15. Two-way conveyor between stations 14 and 15: 9 minutes maintenance time (total), 4 minutes travel time in either direction 16. One-way conveyor from station 15 to 16: 5 minutes maintenance time, 2 minutes travel time 17. Two-way conveyor between stations 16 and 17: 8 minutes maintenance time (total), 3 minutes travel time in either direction 18. One-way conveyor from station 17 to 18: 6 minutes maintenance time, 2 minutes travel time 19. Two-way conveyor between stations 18 and 19: 7 minutes maintenance time (total), 4 minutes travel time in either direction 20. One-way conveyor from station 19 to 0: 10 minutes maintenance time, 5 minutes travel time 21. One-way conveyor from station 1 to 5: 8 minutes maintenance time, 3 minutes travel time 22. One-way conveyor from station 3 to 7: 6 minutes maintenance time, 2 minutes travel time 23. Two-way conveyor between stations 5 and 9: 7 minutes maintenance time (total), 4 minutes travel time in either direction 24. One-way conveyor from station 7 to 11: 5 minutes maintenance time, 1 minute travel time 25. Two-way conveyor between stations 9 and 13: 8 minutes maintenance time (total), 3 minutes travel time in either direction 26. One-way conveyor from station 11 to 15: 6 minutes maintenance time, 2 minutes travel time 27. Two-way conveyor between stations 13 and 17: 7 minutes maintenance time (total), 4 minutes travel time in either direction 28. One-way conveyor from station 15 to 19: 9 minutes maintenance time, 5 minutes travel time 29. Two-way conveyor between stations 17 and 0: 5 minutes maintenance time (total), 2 minutes travel time in either direction 30. One-way conveyor from station 19 to 2: 8 minutes maintenance time, 3 minutes travel time 31. Two-way conveyor between stations 2 and 6: 6 minutes maintenance time (total), 4 minutes travel time in either direction 32. One-way conveyor from station 4 to 8: 7 minutes maintenance time, 2 minutes travel time 33. One-way conveyor from station 6 to 10: 5 minutes maintenance time, 3 minutes travel time 34. Two-way conveyor between stations 8 and 12: 8 minutes maintenance time (total), 5 minutes travel time in either direction 35. One-way conveyor from station 10 to 14: 6 minutes maintenance time, 2 minutes travel time. Important rules: For one-way conveyors, maintenance must be done in the specified direction. For two-way conveyors, maintenance can be completed in either direction (only one direction needs maintenance). When a conveyor segment is traversed for the first time in the maintenance direction, both maintenance time and travel time are incurred. Subsequent traversals of the same conveyor segment incur only travel time. The maintenance route must start and end at the depot station 0 and ensure all 35 conveyor segments are maintained once. Conveyors can be traversed multiple times if needed for route connectivity. How should the maintenance team plan the route to complete all maintenance tasks in the minimum total time?",
  "solution_format_description": "Print the following fields: - route: sequence of stations visited. - total_time: total maintenance and travel time.",
  "structured_data": {
    "num_stations": 20,
    "conveyor_segments": [
        [0, 1, 8, 3, 0],
        [1, 2, 6, 2, 0],
        [2, 3, 7, 4, 1],
        [3, 4, 5, 1, 0],
        [4, 5, 9, 2, 1],
        [5, 6, 4, 3, 0],
        [6, 7, 8, 5, 1],
        [7, 8, 6, 2, 0],
        [8, 9, 7, 3, 1],
        [9, 10, 5, 2, 0],
        [10, 11, 8, 4, 1],
        [11, 12, 4, 1, 0],
        [12, 13, 6, 3, 1],
        [13, 14, 7, 2, 0],
        [14, 15, 9, 4, 1],
        [15, 16, 5, 2, 0],
        [16, 17, 8, 3, 1],
        [17, 18, 6, 2, 0],
        [18, 19, 7, 4, 1],
        [19, 0, 10, 5, 0],
        [1, 5, 8, 3, 0],
        [3, 7, 6, 2, 0],
        [5, 9, 7, 4, 1],
        [7, 11, 5, 1, 0],
        [9, 13, 8, 3, 1],
        [11, 15, 6, 2, 0],
        [13, 17, 7, 4, 1],
        [15, 19, 9, 5, 0],
        [17, 0, 5, 2, 1],
        [19, 2, 8, 3, 0],
        [2, 6, 6, 4, 1],
        [4, 8, 7, 2, 0],
        [6, 10, 5, 3, 0],
        [8, 12, 8, 5, 1],
        [10, 14, 6, 2, 0]
      ]
  },
  "reference_solution": {
    "route": [0, 1, 2, 3, 4, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19, 0, 1, 5, 4, 8, 9, 5, 6, 7, 11, 15, 19, 2, 6, 10, 14, 15, 19, 2, 3, 7, 8, 12, 13, 9, 13, 17, 0],
    "total_time": 368
  },
  "solver_code": "",
  "evaluation_function": "def evaluate(candidate_solution, structured_data, reference_solution):\n    import json\n    \n    try:\n        solution = json.loads(candidate_solution) if isinstance(candidate_solution, str) else candidate_solution\n    except:\n        return {\"is_valid\": False, \"validation_errors\": [\"Invalid JSON format\"], \"optimality_score\": 0.0}\n    \n    required_fields = [\"route\", \"total_time\"]\n    missing = [f for f in required_fields if solution is None or f not in solution]\n    if missing:\n        return {\"is_valid\": False, \"validation_errors\": [f\"Missing fields: {missing}\"], \"optimality_score\": 0.0}\n    \n    try:\n        route = solution[\"route\"]\n        total_time = solution[\"total_time\"]\n        conveyor_segments = structured_data[\"conveyor_segments\"]\n        errors = []\n        \n        if not route or route[0] != 0 or route[-1] != 0:\n            errors.append(\"Route must start and end at station 0\")\n        \n        def is_connected(u, v):\n            for segment in conveyor_segments:\n                su, sv, _, _, bidirectional = segment\n                if bidirectional == 0:\n                    if su == u and sv == v:\n                        return True\n                else:\n                    if (su == u and sv == v) or (su == v and sv == u):\n                        return True\n            return False\n        \n        for i in range(len(route) - 1):\n            u, v = route[i], route[i + 1]\n            if not is_connected(u, v):\n                errors.append(f\"Invalid path segment: {u} -> {v}\")\n        \n        covered_segments = set()\n        for i in range(len(route) - 1):\n            u, v = route[i], route[i + 1]\n            for idx, segment in enumerate(conveyor_segments):\n                su, sv, _, _, bidirectional = segment\n                if bidirectional == 0:\n                    if su == u and sv == v:\n                        covered_segments.add(idx)\n                        break\n                else:\n                    if (su == u and sv == v) or (su == v and sv == u):\n                        covered_segments.add(idx)\n                        break\n        \n        if len(covered_segments) != len(conveyor_segments):\n            errors.append(f\"Must cover all conveyor segments: {len(covered_segments)}/{len(conveyor_segments)}\")\n        \n        if len(errors) == 0:\n            optimal_time = reference_solution.get(\"total_time\", 0)\n            if optimal_time > 0:\n                gap = abs(optimal_time - total_time) / abs(optimal_time)\n                optimality_score = max(0, 1 - gap)\n            else:\n                optimality_score = 1.0\n        else:\n            optimality_score = 0.0\n        \n        return {\n            \"is_valid\": len(errors) == 0,\n            \"validation_errors\": errors,\n            \"optimality_score\": optimality_score\n        }\n        \n    except Exception:\n        return {\"is_valid\": False, \"validation_errors\": [\"Format error in solution data\"], \"optimality_score\": 0.0}"
}
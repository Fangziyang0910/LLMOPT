{
  "problem_id": "quadratic_knapsack_with_conflict_graphs_003",
  "metadata": {
    "problem_type": "Quadratic Knapsack Problem with Conflict Graphs",
    "difficulty": "hard"
  },
  "problem_description": "Dr. Martinez is managing a research grant program for a technology foundation with a total budget of $160 million and needs to select the most promising combination of innovative projects, where each project can either be fully funded or not funded at all. The available projects have the following individual expected returns and costs (in million dollars): 1. AlphaTech AI with return 15 and cost 8; 2. BetaCloud Systems with return 28 and cost 15; 3. GammaData Analytics with return 22 and cost 12; 4. DeltaCyber Security with return 35 and cost 19; 5. EpsilonBioTech with return 26 and cost 14; 6. ZetaRobotics with return 42 and cost 23; 7. EtaQuantum Computing with return 31 and cost 17; 8. ThetaClean Energy with return 38 and cost 21; 9. IotaFinTech with return 19 and cost 10; 10. KappaSpaceTech with return 45 and cost 25; 11. LambdaAutonomous Vehicles with return 17 and cost 9; 12. MuBlockchain with return 29 and cost 16; 13. NuAR/VR with return 33 and cost 18; 14. XiIoT Platforms with return 48 and cost 27; 15. Omicron5G Networks with return 24 and cost 13; 16. PiMachine Learning with return 27 and cost 15; 17. RhoEdge Computing with return 41 and cost 23; 18. SigmaHealthTech with return 53 and cost 30; 19. TauE-commerce with return 21 and cost 11; 20. UpsilonGaming with return 47 and cost 26; 21. PhiSmart Cities with return 32 and cost 18; 22. ChiGreenTech with return 55 and cost 31; 23. PsiEdTech with return 37 and cost 21; 24. OmegaDigital Health with return 59 and cost 33; 25. Alpha2 Quantum Sensors with return 25 and cost 14; 26. Beta2 Drone Delivery with return 43 and cost 24; 27. Gamma2 Autonomous Drones with return 34 and cost 19; 28. Delta2 Neural Networks with return 49 and cost 28; 29. Epsilon2 Virtual Reality with return 39 and cost 22; 30. Zeta2 Cybersecurity AI with return 51 and cost 29; 31. Lambda2 Clean Energy Storage with return 30 and cost 17; 32. Mu2 Agricultural Tech with return 35 and cost 20; 33. Nu2 Smart Materials with return 44 and cost 25; 34. Xi2 Biotechnology with return 40 and cost 23; 35. Omicron2 Renewable Energy with return 46 and cost 26; 36. Pi2 Quantum Communication with return 52 and cost 30; 37. Rho2 Artificial Intelligence with return 58 and cost 33; 38. Sigma2 Nanotechnology with return 36 and cost 21; 39. Tau2 Robotics with return 45 and cost 26; 40. Upsilon2 Space Exploration with return 61 and cost 35. When certain projects are selected together, they generate additional synergy returns (in million dollars): AlphaTech-BetaCloud (5), BetaCloud-GammaData (7), AlphaTech-DeltaCyber (9), DeltaCyber-EpsilonBioTech (11), BetaCloud-ZetaRobotics (12), AlphaTech-EtaQuantum (4), BetaCloud-ThetaClean (8), GammaData-IotaFinTech (6), EpsilonBioTech-KappaSpaceTech (10), ZetaRobotics-KappaSpaceTech (9), LambdaAutonomous-MuBlockchain (6), MuBlockchain-NuAR/VR (8), LambdaAutonomous-XiIoT (5), NuAR/VR-Omicron5G (7), PiMachine-RhoEdge (6), RhoEdge-SigmaHealthTech (10), PiMachine-ThetaClean (4), SigmaHealthTech-TauE-commerce (12), ChiGreenTech-PsiEdTech (8), OmegaDigital-Alpha2 (11), Beta2-Gamma2 (7), Alpha2-Delta2 (10), Delta2-Epsilon2 (12), Zeta2-Lambda2 (9), Mu2-Nu2 (8), Xi2-Omicron2 (11), Pi2-Rho2 (10), Sigma2-Tau2 (9). Due to technological overlap and resource competition, certain project combinations are mutually exclusive: AlphaTech cannot be combined with GammaData, BetaCloud conflicts with EtaQuantum, DeltaCyber is incompatible with IotaFinTech, EpsilonBioTech cannot work together with KappaSpaceTech, ZetaRobotics conflicts with ThetaClean, LambdaAutonomous is incompatible with Omicron5G, MuBlockchain cannot be combined with PiMachine, NuAR/VR conflicts with RhoEdge, XiIoT is incompatible with SigmaHealthTech, Omicron5G cannot work together with TauE-commerce, PhiSmart conflicts with UpsilonGaming, ChiGreenTech is incompatible with Alpha2, PsiEdTech cannot be combined with Beta2, OmegaDigital conflicts with Gamma2, Alpha2 is incompatible with Delta2, Beta2 cannot work together with Epsilon2, Gamma2 conflicts with Zeta2, Delta2 is incompatible with Lambda2, Epsilon2 cannot be combined with Mu2, Zeta2 conflicts with Nu2, ThetaClean is incompatible with Xi2, KappaSpaceTech cannot work together with Omicron2, Lambda2 conflicts with Pi2, Mu2 is incompatible with Rho2, Nu2 cannot be combined with Sigma2, Xi2 conflicts with Tau2, and Omicron2 is incompatible with Upsilon2. Dr. Martinez wants to determine the optimal investment portfolio that maximizes total return while respecting the budget limit and compatibility constraints.",
  "solution_format_description": "Print the following fields: - selected_projects: selection status for each project. - total_return: total expected return. - total_cost: total development cost.",  
  "structured_data": {
    "projects": [
      [15, 8],
      [28, 15],
      [22, 12],
      [35, 19],
      [26, 14],
      [42, 23],
      [31, 17],
      [38, 21],
      [19, 10],
      [45, 25],
      [17, 9],
      [29, 16],
      [33, 18],
      [48, 27],
      [24, 13],
      [27, 15],
      [41, 23],
      [53, 30],
      [21, 11],
      [47, 26],
      [32, 18],
      [55, 31],
      [37, 21],
      [59, 33],
      [25, 14],
      [43, 24],
      [34, 19],
      [49, 28],
      [39, 22],
      [51, 29],
      [30, 17],
      [35, 20],
      [44, 25],
      [40, 23],
      [46, 26],
      [52, 30],
      [58, 33],
      [36, 21],
      [45, 26],
      [61, 35]
    ],
    "synergy_effects": [
      [0, 1, 5],
      [1, 2, 7],
      [0, 3, 9],
      [3, 4, 11],
      [1, 5, 12],
      [0, 6, 4],
      [1, 7, 8],
      [2, 8, 6],
      [4, 9, 10],
      [5, 9, 9],
      [10, 11, 6],
      [11, 12, 8],
      [10, 13, 5],
      [12, 14, 7],
      [15, 16, 6],
      [15, 17, 10],
      [15, 7, 4],
      [17, 18, 12],
      [21, 22, 8],
      [23, 24, 11],
      [25, 26, 7],
      [24, 27, 7],
      [27, 28, 12],
      [29, 30, 9],
      [31, 32, 8],
      [33, 34, 11],
      [35, 36, 10],
      [37, 38, 9]
      ],
    "market_conflicts": [
      [0, 2],
      [1, 6],
      [3, 8],
      [4, 9],
      [5, 7],
      [10, 14],
      [11, 15],
      [12, 16],
      [13, 17],
      [14, 18],
      [19, 20],
      [21, 24],
      [22, 25],
      [23, 26],
      [24, 27],
      [25, 28],
      [26, 29],
      [27, 30],
      [28, 31],
      [29, 32],
      [7, 33],
      [9, 34],
      [30, 35],
      [31, 36],
      [32, 37],
      [33, 38],
      [34, 39]
    ],
    "budget_limit": 160
  },
  "reference_solution": {
    "selected_projects": [1, 1, 0, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0],
    "total_return": 353,
    "total_cost": 158
  },
  "solver_code": "",
  "evaluation_function": "def evaluate(candidate_solution, structured_data, reference_solution):\n    import json\n    \n    try:\n        solution = json.loads(candidate_solution) if isinstance(candidate_solution, str) else candidate_solution\n    except:\n        return {\"is_valid\": False, \"validation_errors\": [\"Invalid JSON format\"], \"optimality_score\": 0.0}\n    \n    required_fields = [\"selected_projects\", \"total_return\", \"total_cost\"]\n    missing = [f for f in required_fields if solution is None or f not in solution]\n    if missing:\n        return {\"is_valid\": False, \"validation_errors\": [f\"Missing fields: {missing}\"], \"optimality_score\": 0.0}\n    \n    try:\n        selected_projects = solution[\"selected_projects\"]\n        total_cost = solution[\"total_cost\"]\n        total_return = solution[\"total_return\"]\n        projects = structured_data[\"projects\"]\n        synergy_effects = structured_data[\"synergy_effects\"]\n        market_conflicts = structured_data[\"market_conflicts\"]\n        budget_limit = structured_data[\"budget_limit\"]\n        errors = []\n        \n        if len(selected_projects) != len(projects):\n            errors.append(f\"Array length mismatch: expected {len(projects)}, got {len(selected_projects)}\")\n        \n        if total_cost > budget_limit:\n            errors.append(f\"Budget constraint violated: {total_cost} > {budget_limit}\")\n        \n        for conflict in market_conflicts:\n            i, j = conflict\n            if selected_projects[i] == 1 and selected_projects[j] == 1:\n                errors.append(f\"Market conflict violated: projects {i} and {j} both selected\")\n        \n        calc_cost = sum(projects[i][1] * selected_projects[i] for i in range(len(projects)))\n        if abs(calc_cost - total_cost) > 1e-6:\n            errors.append(f\"Cost inconsistency: calculated {calc_cost}, declared {total_cost}\")\n        \n        individual_profit = sum(projects[i][0] * selected_projects[i] for i in range(len(projects)))\n        synergy_profit = 0\n        for proj1, proj2, synergy_value in synergy_effects:\n            if selected_projects[proj1] == 1 and selected_projects[proj2] == 1:\n                synergy_profit += synergy_value\n        \n        expected_return = individual_profit + synergy_profit\n        if abs(expected_return - total_return) > 1e-6:\n            errors.append(f\"Return inconsistency: calculated {expected_return}, declared {total_return}\")\n        \n        if len(errors) > 0:\n            optimality_score = 0.0\n        else:\n            optimal_return = reference_solution[\"total_return\"]\n            if optimal_return == 0:\n                optimality_score = 1.0 if total_return == 0 else 0.0\n            else:\n                gap = abs(optimal_return - total_return) / abs(optimal_return)\n                optimality_score = max(0, 1 - gap)\n        \n        return {\n            \"is_valid\": len(errors) == 0,\n            \"validation_errors\": errors,\n            \"optimality_score\": optimality_score\n        }\n        \n    except Exception as e:\n        return {\"is_valid\": False, \"validation_errors\": [\"Format error in solution data\"], \"optimality_score\": 0.0}\n  "
}
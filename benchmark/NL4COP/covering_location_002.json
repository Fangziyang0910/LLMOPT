{
  "problem_id": "covering_location_002",
  "metadata": {
    "problem_type": "Covering Location Problem",
    "difficulty": "medium"
  },
  "problem_description": "A regional healthcare authority is planning to establish emergency medical facilities to serve 25 communities across a rural area spanning approximately 100 kilometers. Due to budget limitations, they can build at most 5 facilities, and each facility can provide emergency services to communities within a 30-kilometer radius. A community is considered covered if it has at least one facility within this service radius. The communities are distributed across the region with the following coordinates (in kilometers from a reference point) and populations: Community 0 at (7.0, 1.6) with 2,600 people, Community 1 at (8.1, 3.3) with 8,200 people, Community 2 at (2.8, 1.9) with 4,600 people, Community 3 at (7.4, 8.1) with 4,200 people, Community 4 at (6.5, 4.8) with 2,800 people, Community 5 at (0.8, 1.5) with 7,500 people, Community 6 at (2.9, 5.7) with 2,600 people, Community 7 at (6.2, 2.5) with 12,700 people, Community 8 at (2.8, 5.1) with 9,100 people, Community 9 at (8.8, 9.4) with 2,100 people, Community 10 at (8.3, 8.8) with 6,000 people, Community 11 at (7.6, 4.8) with 10,700 people, Community 12 at (3.3, 2.1) with 7,500 people, Community 13 at (8.3, 3.9) with 4,600 people, Community 14 at (1.4, 4.4) with 4,400 people, Community 15 at (4.2, 9.2) with 10,800 people, Community 16 at (6.7, 3.2) with 3,100 people, Community 17 at (8.0, 5.2) with 5,100 people, Community 18 at (4.4, 1.3) with 9,500 people, Community 19 at (9.0, 6.9) with 11,200 people, Community 20 at (6.4, 2.5) with 3,700 people, Community 21 at (1.0, 7.3) with 7,800 people, Community 22 at (8.4, 3.5) with 4,000 people, Community 23 at (9.3, 2.9) with 4,500 people, and Community 24 at (4.4, 3.3) with 13,600 people. Each facility must be located at one of the community coordinates, and the authority wants to determine which locations to select to maximize the total population with emergency service access.",
  "solution_format_description": "Print the following fields: - selected_facility_locations: communities chosen for facilities. - total_covered_population: total population covered by facilities.",
  "structured_data": {
    "communities": [
      [7.0, 1.6, 2600],
      [8.1, 3.3, 8200],
      [2.8, 1.9, 4600],
      [7.4, 8.1, 4200],
      [6.5, 4.8, 2800],
      [0.8, 1.5, 7500],
      [2.9, 5.7, 2600],
      [6.2, 2.5, 12700],
      [2.8, 5.1, 9100],
      [8.8, 9.4, 2100],
      [8.3, 8.8, 6000],
      [7.6, 4.8, 10700],
      [3.3, 2.1, 7500],
      [8.3, 3.9, 4600],
      [1.4, 4.4, 4400],
      [4.2, 9.2, 10800],
      [6.7, 3.2, 3100],
      [8.0, 5.2, 5100],
      [4.4, 1.3, 9500],
      [9.0, 6.9, 11200],
      [6.4, 2.5, 3700],
      [1.0, 7.3, 7800],
      [8.4, 3.5, 4000],
      [9.3, 2.9, 4500],
      [4.4, 3.3, 13600]
    ],
    "service_radius": 30,
    "max_medical_facilities": 5
  },
  "reference_solution": {
    "selected_facility_locations": [20, 21, 22, 23, 24],
    "total_covered_population": 162900
  },
  "solver_code": "",
  "evaluation_function": "def evaluate(candidate_solution, structured_data, reference_solution):\n    import json\n    try:\n        solution = json.loads(candidate_solution) if isinstance(candidate_solution, str) else candidate_solution\n    except:\n        return {\"is_valid\": False, \"validation_errors\": [\"Invalid JSON format\"], \"optimality_score\": 0.0}\n    required_fields = [\"selected_facility_locations\", \"total_covered_population\"]\n    missing = [f for f in required_fields if solution is None or f not in solution]\n    if missing:\n        return {\"is_valid\": False, \"validation_errors\": [f\"Missing fields: {missing}\"], \"optimality_score\": 0.0}\n    try:\n        selected_facility_locations = solution[\"selected_facility_locations\"]\n        total_covered_population = solution[\"total_covered_population\"]\n        communities = structured_data[\"communities\"]\n        service_radius = structured_data[\"service_radius\"]\n        max_facilities = structured_data[\"max_medical_facilities\"]\n        errors = []\n        if len(selected_facility_locations) != max_facilities:\n            errors.append(f\"Selected facilities count mismatch: expected {max_facilities}, got {len(selected_facility_locations)}\")\n        for idx in selected_facility_locations:\n            if idx < 0 or idx >= len(communities):\n                errors.append(f\"Invalid community index: {idx}\")\n        if len(selected_facility_locations) != len(set(selected_facility_locations)):\n            errors.append(\"Duplicate community indices in selection\")\n        total_calculated_population = 0\n        calculated_covered = set()\n        for j in range(len(communities)):\n            is_covered = False\n            for facility_idx in selected_facility_locations:\n                x1, y1, _ = communities[facility_idx]\n                x2, y2, _ = communities[j]\n                distance = ((x1-x2)**2 + (y1-y2)**2)**0.5\n                if distance <= service_radius:\n                    is_covered = True\n                    calculated_covered.add(j)\n                    break\n            if is_covered:\n                total_calculated_population += communities[j][2]\n        if abs(total_calculated_population - total_covered_population) > 1e-6:\n            errors.append(f\"Population calculation mismatch: calculated {total_calculated_population}, declared {total_covered_population}\")\n        if len(errors) > 0:\n            optimality_score = 0.0\n        else:\n            optimal_population = reference_solution[\"total_covered_population\"]\n            if optimal_population == 0:\n                optimality_score = 1.0 if total_covered_population == 0 else 0.0\n            else:\n                gap = abs(optimal_population - total_covered_population) / abs(optimal_population)\n                optimality_score = max(0, 1 - gap)\n        return {\"is_valid\": len(errors) == 0, \"validation_errors\": errors, \"optimality_score\": optimality_score}\n    except Exception as e:\n        return {\"is_valid\": False, \"validation_errors\": [\"Format error in solution data\"], \"optimality_score\": 0.0}"
}
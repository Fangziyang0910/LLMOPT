{
  "problem_id": "mdmkp_001",
  "metadata": {
    "problem_type": "Multi-Demand Multidimensional Knapsack Problem",
    "difficulty": "simple"
  },
  "problem_description": "Within an interconnected socio-technical framework, a strategic transformation program demands optimal selection among ten distinct intervention modalities, each exhibiting unique resource consumption profiles and value creation potentials. The system operates under dual resource constraints: financial capital allocation in thousands of US dollars and specialized human capital investment measured in professional service hours. Furthermore, the intervention must achieve a minimum community engagement threshold quantified as social impact points. The intervention modalities demonstrate the following characteristics: 1. Digital Infrastructure Initiative: Requires $42,000 and 509 professional hours, contributes 556 social impact points and delivers 835 value units; 2. Community Engagement Platform: Requires $41,000 and 883 professional hours, contributes 125 social impact points and delivers 1102 value units; 3. Sustainable Development Project: Requires $523,000 and 229 professional hours, contributes 736 social impact points and delivers 631 value units; 4. Technology Transfer Program: Requires $215,000 and 569 professional hours, contributes 557 social impact points and delivers 868 value units; 5. Innovation Ecosystem Builder: Requires $819,000 and 706 professional hours, contributes 301 social impact points and delivers 1206 value units; 6. Knowledge Management System: Requires $551,000 and 639 professional hours, contributes 6 social impact points and delivers 1618 value units; 7. Capacity Building Framework: Requires $69,000 and 114 professional hours, contributes 111 social impact points and delivers 1314 value units; 8. Stakeholder Network Initiative: Requires $193,000 and 727 professional hours, contributes 16 social impact points and delivers 1427 value units; 9. Cross-Sector Collaboration Platform: Requires $582,000 and 491 professional hours, contributes 704 social impact points and delivers 768 value units; 10. Integrated Solution Architecture: Requires $375,000 and 481 professional hours, contributes 952 social impact points and delivers 381 value units. Resource constraints limit total financial allocation to $2,500,000 and total professional service hours to 3,000. The program must achieve at least 3,000 social impact points to meet strategic objectives. Which combination of intervention modalities should be selected to maximize total value creation while respecting all resource constraints and meeting the minimum social impact requirement?",
  "solution_format_description": "Print the following fields: - selected_modalities: selection status for each modality. - total_value_creation: total value created. - total_constraints: list resource usage with financial cost, professional hours, social impact.",
  "structured_data": {
    "modalities": [
      [42, 509, 556, 835], 
      [41, 883, 125, 1102], 
      [523, 229, 736, 631], 
      [215, 569, 557, 868], 
      [819, 706, 301, 1206], 
      [551, 639, 6, 1618], 
      [69, 114, 111, 1314], 
      [193, 727, 16, 1427], 
      [582, 491, 704, 768], 
      [375, 481, 952, 381]
    ],
    "constraints": [2500, 3000, 3000]
  },
  "reference_solution": {
    "selected_modalities": [0, 0, 1, 1, 0, 1, 1, 0, 1, 1],
    "total_value_creation": 5580,
    "total_constraints": [2315, 2523, 3066]
  },
  "solver_code": "from cpmpy import *\nimport json\n\nmodalities = [[42, 509, 556, 835], [41, 883, 125, 1102], [523, 229, 736, 631], [215, 569, 557, 868], [819, 706, 301, 1206], [551, 639, 6, 1618], [69, 114, 111, 1314], [193, 727, 16, 1427], [582, 491, 704, 768], [375, 481, 952, 381]]\nconstraints = [2500, 3000, 3000]\n\nnum_modalities = len(modalities)\nmax_financial = constraints[0]\nmax_professional_hours = constraints[1]\nmin_social_impact = constraints[2]\n\nx = boolvar(shape=num_modalities)\n\nmodel = Model()\n\nmodel += sum(modalities[i][0] * x[i] for i in range(num_modalities)) <= max_financial\nmodel += sum(modalities[i][1] * x[i] for i in range(num_modalities)) <= max_professional_hours\nmodel += sum(modalities[i][2] * x[i] for i in range(num_modalities)) >= min_social_impact\n\nmodel.maximize(sum(modalities[i][3] * x[i] for i in range(num_modalities)))\n\nif model.solve():\n    selected = [int(x[i].value()) for i in range(num_modalities)]\n    total_value_creation = sum(modalities[i][3] * selected[i] for i in range(num_modalities))\n    total_financial_cost = sum(modalities[i][0] * selected[i] for i in range(num_modalities))\n    total_professional_hours = sum(modalities[i][1] * selected[i] for i in range(num_modalities))\n    total_social_impact = sum(modalities[i][2] * selected[i] for i in range(num_modalities))\n    \n    result = {\n        \"selected_modalities\": selected,\n        \"total_value_creation\": total_value_creation,\n        \"total_constraints\": [total_financial_cost, total_professional_hours, total_social_impact]\n    }\n    print(json.dumps(result))",
  "evaluation_function": "def evaluate(candidate_solution, structured_data, reference_solution):\n    import json\n    \n    try:\n        solution = json.loads(candidate_solution) if isinstance(candidate_solution, str) else candidate_solution\n    except:\n        return {\"is_valid\": False, \"validation_errors\": [\"Invalid JSON format\"], \"optimality_score\": 0.0}\n    \n    required_fields = [\"selected_modalities\", \"total_value_creation\", \"total_constraints\"]\n    missing = [f for f in required_fields if solution is None or f not in solution]\n    if missing:\n        return {\"is_valid\": False, \"validation_errors\": [f\"Missing fields: {missing}\"], \"optimality_score\": 0.0}\n    \n    try:\n        selected = solution[\"selected_modalities\"]\n        total_constraints = solution[\"total_constraints\"]\n        total_financial_cost = total_constraints[0]\n        total_professional_hours = total_constraints[1]\n        total_social_impact = total_constraints[2]\n        \n        modalities = structured_data[\"modalities\"]\n        constraints = structured_data[\"constraints\"]\n        num_modalities = len(modalities)\n        errors = []\n        \n        if len(selected) != num_modalities:\n            errors.append(f\"Selection array length mismatch: expected {num_modalities}, got {len(selected)}\")\n            return {\"is_valid\": False, \"validation_errors\": errors, \"optimality_score\": 0.0}\n        \n        for i in range(num_modalities):\n            if selected[i] not in [0, 1]:\n                errors.append(f\"Invalid selection value at index {i}: {selected[i]} (must be 0 or 1)\")\n        \n        if total_financial_cost > constraints[0]:\n            errors.append(f\"Financial constraint violated: {total_financial_cost} > {constraints[0]}\")\n        \n        if total_professional_hours > constraints[1]:\n            errors.append(f\"Professional hours constraint violated: {total_professional_hours} > {constraints[1]}\")\n        \n        if total_social_impact < constraints[2]:\n            errors.append(f\"Social impact requirement not met: {total_social_impact} < {constraints[2]}\")\n        \n        if len(errors) == 0:\n            optimal_value = reference_solution[\"total_value_creation\"]\n            if optimal_value == 0:\n                optimality_score = 1.0 if solution[\"total_value_creation\"] == 0 else 0.0\n            else:\n                gap = abs(optimal_value - solution[\"total_value_creation\"]) / abs(optimal_value)\n                optimality_score = max(0, 1 - gap)\n        else:\n            optimality_score = 0.0\n        \n        return {\n            \"is_valid\": len(errors) == 0,\n            \"validation_errors\": errors,\n            \"optimality_score\": optimality_score\n        }\n        \n    except Exception as e:\n        return {\"is_valid\": False, \"validation_errors\": [\"Format error in solution data\"], \"optimality_score\": 0.0}"
}
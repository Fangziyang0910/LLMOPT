{
  "problem_id": "generalised_assignment_002",
  "metadata": {
    "problem_type": "Generalised Assignment Problem",
    "difficulty": "medium"
  },
  "problem_description": "Within the sophisticated operational landscape of a global manufacturing consortium, eight specialized production modules operate with distinct temporal capacity constraints: the Alpha module can process thirty-six time units, Beta module thirty-five units, Gamma module thirty-eight units, Delta module thirty-four units, Epsilon module thirty-two units, Zeta module thirty-four units, Eta module thirty-one units, and Theta module thirty-four units. Twenty-four intricate production contracts present themselves for fulfillment, each demonstrating unique profitability characteristics when assigned to different production modules. For instance, the initial contract would generate twenty-five profit units through Alpha, sixteen through Beta, twenty through Gamma, sixteen through Delta, seventeen through Epsilon, twenty-four through Zeta, eighteen through Eta, and nineteen through Theta, while consuming eight, twenty-four, twenty-two, thirteen, twenty-five, nineteen, twenty-four, and six time units respectively. This pattern of asymmetric profit-time relationships continues throughout the contract portfolio, with the second contract showing profits of twenty-three, nineteen, eighteen, sixteen, twenty-three, twenty-one, twenty-one, and twenty-four units across the eight modules, requiring eighteen, fourteen, twenty-two, eight, sixteen, nineteen, ten, and nine time units correspondingly. The third contract demonstrates yet another configuration with profits of twenty, twenty-two, twenty-three, fifteen, twenty-one, twenty-three, twenty-two, and eighteen units, consuming twenty-two, eleven, twenty-one, nineteen, thirteen, five, nine, and nine time units respectively. Subsequent contracts follow similarly intricate patterns where the fourth contract presents profits of sixteen, twenty-two, twenty-three, twenty-three, twenty, seventeen, twenty-three, and seventeen units with time requirements of five, fifteen, twenty-two, twelve, five, eleven, ten, and five units; the fifth shows profits of nineteen, nineteen, twenty-three, fifteen, twenty-four, twenty-one, twenty-two, and twenty-one units requiring eleven, twenty-four, thirteen, nineteen, eleven, twenty-two, six, and twelve time units; the sixth contract yields profits of twenty-two, twenty-three, seventeen, fifteen, twenty-two, nineteen, fifteen, and eighteen units while consuming eleven, eight, sixteen, eighteen, twenty-four, nineteen, fifteen, and ten time units; the seventh contract offers profits of twenty, seventeen, nineteen, twenty-five, twenty-five, nineteen, eighteen, and twenty-four units with respective time consumptions of twenty-two, ten, twenty-one, ten, seven, eighteen, fifteen, and eighteen time units; the eighth contract provides profits of sixteen, twenty-four, sixteen, twenty-two, seventeen, seventeen, fifteen, and twenty-five units requiring eleven, fifteen, five, twenty-one, eight, eleven, thirteen, and fifteen time units; the ninth demonstrates profits of fifteen, fifteen, twenty-four, seventeen, twenty-two, eighteen, twenty-one, and eighteen units with time needs of seventeen, nineteen, twenty-five, five, twenty-five, six, twenty, and nineteen time units; the tenth contract shows profits of twenty-two, twenty-four, twenty-four, twenty, twenty, twenty-four, twenty-two, and twenty-three units consuming twenty-two, twenty-five, thirteen, nine, twenty, thirteen, eight, and eighteen time units; the eleventh contract generates profits of fifteen, eighteen, seventeen, sixteen, fifteen, fifteen, fifteen, and twenty-one units while requiring eleven, six, twelve, eleven, twenty-four, twenty-four, seven, and twenty time units; the twelfth contract provides profits of twenty-one, nineteen, twenty-three, sixteen, twenty-two, seventeen, twenty-three, and fifteen units with time consumptions of twenty, thirteen, nine, nine, twenty, twenty-two, nine, and eighteen time units; the thirteenth contract displays profits of twenty, twenty, nineteen, seventeen, twenty-one, seventeen, twenty-one, and twenty-four units requiring thirteen, ten, twenty-four, twenty-two, eleven, twenty-two, twenty-four, and sixteen time units; the fourteenth contract presents profits of twenty-three, twenty-four, twenty-two, twenty, twenty-three, eighteen, twenty-five, and twenty-three units with time demands of thirteen, twenty-five, six, eight, six, six, nine, and twenty-one time units; the fifteenth contract offers profits of twenty, twenty-five, twenty-three, seventeen, twenty-four, fifteen, eighteen, and eighteen units consuming seven, nineteen, twenty-two, ten, five, fourteen, eleven, and twelve time units; the sixteenth contract shows profits of twenty-two, twenty-five, twenty-five, seventeen, fifteen, twenty-four, twenty-three, and eighteen units requiring twenty-two, twenty-four, twenty-four, thirteen, ten, five, nine, and twenty-two time units; the seventeenth contract presents profits of nineteen, nineteen, twenty-three, seventeen, twenty-two, nineteen, twenty, and twenty-three units with time requirements of fifteen, thirteen, eleven, nine, six, fourteen, eleven, and twenty-two time units; the eighteenth contract provides profits of twenty-five, twenty-four, eighteen, eighteen, twenty-five, twenty-one, sixteen, and twenty-three units consuming twenty-two, five, eleven, twenty-five, six, six, twenty-one, and sixteen time units; the nineteenth contract displays profits of twenty-five, eighteen, nineteen, sixteen, eighteen, twenty-three, twenty-five, and sixteen units requiring twenty-four, eighteen, eleven, nineteen, ten, sixteen, ten, and twenty-one time units; the twentieth contract presents profits of twenty-four, twenty-one, twenty-four, eighteen, nineteen, twenty-four, seventeen, and twenty units with time demands of eight, ten, fourteen, twenty-four, ten, eleven, five, and twenty-five time units; the twenty-first contract offers profits of twenty-one, sixteen, twenty, fifteen, nineteen, seventeen, fifteen, and twenty units consuming eight, eighteen, twelve, twenty-two, thirteen, six, twenty-three, and seven time units; the twenty-second contract shows profits of seventeen, twenty-five, seventeen, twenty-five, seventeen, twenty, fifteen, and nineteen units requiring twenty-four, twenty-four, ten, six, twenty-one, eight, twenty, and fourteen time units; the twenty-third contract presents profits of twenty-three, fifteen, twenty-three, twenty-two, twenty-two, sixteen, eighteen, and twenty-five units with time requirements of eighteen, eight, twenty, nineteen, five, eighteen, five, and sixteen time units; and finally, the twenty-fourth contract displays profits of seventeen, twenty, twenty-three, seventeen, twenty-three, twenty-one, sixteen, and twenty-one units consuming eight, five, six, fourteen, nineteen, ten, twenty-one, and ten time units respectively. The consortium therefore faces the strategic challenge of determining how to allocate these twenty-four production contracts across the eight production modules to achieve maximum total profitability while ensuring that each contract is handled by only one module and that no module exceeds its temporal capacity limitations.",
  "solution_format_description": "Print the following fields: - contract_module_assignments: module assignment for each contract. - total_profit_value: total profit generated across all contracts.",
  "structured_data": {
    "num_modules": 8,
    "num_contracts": 24,
    "profit_values": [
      [25, 16, 20, 16, 17, 24, 18, 19],
      [23, 19, 18, 16, 23, 21, 21, 24],
      [20, 22, 23, 15, 21, 23, 22, 18],
      [16, 22, 23, 23, 20, 17, 23, 17],
      [19, 19, 23, 15, 24, 21, 22, 21],
      [22, 23, 17, 15, 22, 19, 15, 18],
      [20, 17, 19, 25, 25, 19, 18, 24],
      [16, 24, 16, 22, 17, 17, 15, 25],
      [15, 15, 24, 17, 22, 18, 21, 18],
      [22, 24, 24, 20, 20, 24, 22, 23],
      [15, 18, 17, 16, 15, 15, 15, 21],
      [21, 19, 23, 16, 22, 17, 23, 15],
      [20, 20, 19, 17, 21, 17, 21, 24],
      [23, 24, 22, 20, 23, 18, 25, 23],
      [20, 25, 23, 17, 24, 15, 18, 18],
      [22, 25, 25, 17, 15, 24, 23, 18],
      [19, 19, 23, 17, 22, 19, 20, 23],
      [25, 24, 18, 18, 25, 21, 16, 23],
      [25, 18, 19, 16, 18, 23, 25, 16],
      [24, 21, 24, 18, 19, 24, 17, 20],
      [21, 16, 20, 15, 19, 17, 15, 20],
      [17, 25, 17, 25, 17, 20, 15, 19],
      [23, 15, 23, 22, 22, 16, 18, 25],
      [17, 20, 23, 17, 23, 21, 16, 21]
    ],
    "processing_hours": [
      [8, 24, 22, 13, 25, 19, 24, 6],
      [18, 14, 22, 8, 16, 19, 10, 9],
      [22, 11, 21, 19, 13, 5, 9, 9],
      [5, 15, 22, 12, 5, 11, 10, 5],
      [11, 24, 13, 19, 11, 22, 6, 12],
      [11, 8, 16, 18, 24, 19, 15, 10],
      [22, 10, 21, 10, 7, 18, 15, 18],
      [11, 15, 5, 21, 8, 11, 13, 15],
      [17, 19, 25, 5, 25, 6, 20, 19],
      [22, 25, 13, 9, 20, 13, 8, 18],
      [11, 6, 12, 11, 24, 24, 7, 20],
      [20, 13, 9, 9, 20, 22, 9, 18],
      [13, 10, 24, 22, 11, 22, 24, 16],
      [13, 25, 6, 8, 6, 6, 9, 21],
      [7, 19, 22, 10, 5, 14, 11, 12],
      [22, 24, 24, 13, 10, 5, 9, 22],
      [15, 13, 11, 9, 6, 14, 11, 22],
      [22, 5, 11, 25, 6, 6, 21, 16],
      [24, 18, 11, 19, 10, 16, 10, 21],
      [8, 10, 14, 24, 10, 11, 5, 25],
      [8, 18, 12, 22, 13, 6, 23, 7],
      [24, 24, 10, 6, 21, 8, 20, 14],
      [18, 8, 20, 19, 5, 18, 5, 16],
      [8, 5, 6, 14, 19, 10, 21, 10]
    ],
    "module_capacities": [36, 35, 38, 34, 32, 34, 31, 34]
  },
  "reference_solution": {
    "contract_module_assignments": [1, 1, 6, 4, 5, 2, 4, 2, 3, 6, 2, 7, 8, 7, 5, 6, 5, 5, 7, 6, 1, 4, 8, 3],
    "total_profit_value": 566
  },
  "solver_code": "from cpmpy import *\nimport json\n\nnum_modules = 8\nnum_contracts = 24\n\nprofit = [\n    [25, 16, 20, 16, 17, 24, 18, 19],\n    [23, 19, 18, 16, 23, 21, 21, 24],\n    [20, 22, 23, 15, 21, 23, 22, 18],\n    [16, 22, 23, 23, 20, 17, 23, 17],\n    [19, 19, 23, 15, 24, 21, 22, 21],\n    [22, 23, 17, 15, 22, 19, 15, 18],\n    [20, 17, 19, 25, 25, 19, 18, 24],\n    [16, 24, 16, 22, 17, 17, 15, 25],\n    [15, 15, 24, 17, 22, 18, 21, 18],\n    [22, 24, 24, 20, 20, 24, 22, 23],\n    [15, 18, 17, 16, 15, 15, 15, 21],\n    [21, 19, 23, 16, 22, 17, 23, 15],\n    [20, 20, 19, 17, 21, 17, 21, 24],\n    [23, 24, 22, 20, 23, 18, 25, 23],\n    [20, 25, 23, 17, 24, 15, 18, 18],\n    [22, 25, 25, 17, 15, 24, 23, 18],\n    [19, 19, 23, 17, 22, 19, 20, 23],\n    [25, 24, 18, 18, 25, 21, 16, 23],\n    [25, 18, 19, 16, 18, 23, 25, 16],\n    [24, 21, 24, 18, 19, 24, 17, 20],\n    [21, 16, 20, 15, 19, 17, 15, 20],\n    [17, 25, 17, 25, 17, 20, 15, 19],\n    [23, 15, 23, 22, 22, 16, 18, 25],\n    [17, 20, 23, 17, 23, 21, 16, 21]\n]\n\ntime_required = [\n    [8, 24, 22, 13, 25, 19, 24, 6],\n    [18, 14, 22, 8, 16, 19, 10, 9],\n    [22, 11, 21, 19, 13, 5, 9, 9],\n    [5, 15, 22, 12, 5, 11, 10, 5],\n    [11, 24, 13, 19, 11, 22, 6, 12],\n    [11, 8, 16, 18, 24, 19, 15, 10],\n    [22, 10, 21, 10, 7, 18, 15, 18],\n    [11, 15, 5, 21, 8, 11, 13, 15],\n    [17, 19, 25, 5, 25, 6, 20, 19],\n    [22, 25, 13, 9, 20, 13, 8, 18],\n    [11, 6, 12, 11, 24, 24, 7, 20],\n    [20, 13, 9, 9, 20, 22, 9, 18],\n    [13, 10, 24, 22, 11, 22, 24, 16],\n    [13, 25, 6, 8, 6, 6, 9, 21],\n    [7, 19, 22, 10, 5, 14, 11, 12],\n    [22, 24, 24, 13, 10, 5, 9, 22],\n    [15, 13, 11, 9, 6, 14, 11, 22],\n    [22, 5, 11, 25, 6, 6, 21, 16],\n    [24, 18, 11, 19, 10, 16, 10, 21],\n    [8, 10, 14, 24, 10, 11, 5, 25],\n    [8, 18, 12, 22, 13, 6, 23, 7],\n    [24, 24, 10, 6, 21, 8, 20, 14],\n    [18, 8, 20, 19, 5, 18, 5, 16],\n    [8, 5, 6, 14, 19, 10, 21, 10]\n]\n\nmodule_capacities = [36, 35, 38, 34, 32, 34, 31, 34]\n\nmodel = Model()\nassign = boolvar(shape=(num_contracts, num_modules))\n\nfor i in range(num_contracts):\n    model += sum(assign[i, :]) == 1\n\nfor j in range(num_modules):\n    model += sum([time_required[i][j] * assign[i, j] for i in range(num_contracts)]) <= module_capacities[j]\n\ntotal_profit = sum([profit[i][j] * assign[i, j] for i in range(num_contracts) for j in range(num_modules)])\nmodel.maximize(total_profit)\n\nif model.solve():\n    contract_module_assignments = []\n    for i in range(num_contracts):\n        for j in range(num_modules):\n            if assign[i, j].value():\n                contract_module_assignments.append(j + 1)\n                break\n    \n    result = {\n        \"contract_module_assignments\": contract_module_assignments,\n        \"total_profit_value\": int(total_profit.value())\n    }\n    print(json.dumps(result))\nelse:\n    print(json.dumps({\"error\": \"No solution found\"}))",
  "evaluation_function": "def evaluate(candidate_solution, structured_data, reference_solution):\n    import json\n    \n    try:\n        solution = json.loads(candidate_solution) if isinstance(candidate_solution, str) else candidate_solution\n    except:\n        return {\"is_valid\": False, \"validation_errors\": [\"Invalid JSON format\"], \"optimality_score\": 0.0}\n    \n    required_fields = [\"contract_module_assignments\", \"total_profit_value\"]\n    missing = [f for f in required_fields if solution is None or f not in solution]\n    if missing:\n        return {\"is_valid\": False, \"validation_errors\": [f\"Missing fields: {missing}\"], \"optimality_score\": 0.0}\n    \n    try:\n        assignments = solution[\"contract_module_assignments\"]\n        total_profit_value = solution[\"total_profit_value\"]\n        \n        num_modules = structured_data[\"num_modules\"]\n        num_contracts = structured_data[\"num_contracts\"]\n        processing_hours = structured_data[\"processing_hours\"]\n        module_capacities = structured_data[\"module_capacities\"]\n        errors = []\n        \n        if len(assignments) != num_contracts:\n            errors.append(f\"contract_module_assignments length mismatch: expected {num_contracts}, got {len(assignments)}\")\n            return {\"is_valid\": False, \"validation_errors\": errors, \"optimality_score\": 0.0}\n        \n        for i, module in enumerate(assignments):\n            if not isinstance(module, int) or module < 1 or module > num_modules:\n                errors.append(f\"Contract {i}: invalid module assignment {module}, must be between 1 and {num_modules}\")\n        \n        if len(errors) > 0:\n            return {\"is_valid\": False, \"validation_errors\": errors, \"optimality_score\": 0.0}\n        \n        module_loads = [0] * num_modules\n        \n        if len(processing_hours) == num_contracts and len(processing_hours[0]) == num_modules:\n            for j in range(num_contracts):\n                module = assignments[j] - 1\n                module_loads[module] += processing_hours[j][module]\n        else:\n            for j in range(num_contracts):\n                module = assignments[j] - 1\n                module_loads[module] += processing_hours[module][j]\n        \n        for i in range(num_modules):\n            if module_loads[i] > module_capacities[i]:\n                errors.append(f\"Capacity constraint violated for module {i+1}: processing hours {module_loads[i]} exceeds capacity {module_capacities[i]}\")\n        \n        optimal_value = reference_solution[\"total_profit_value\"]\n        if optimal_value == 0:\n            optimality_score = 1.0 if total_profit_value == 0 else 0.0\n        else:\n            gap = abs(optimal_value - total_profit_value) / abs(optimal_value)\n            optimality_score = max(0, 1 - gap)\n        \n        return {\n            \"is_valid\": len(errors) == 0,\n            \"validation_errors\": errors,\n            \"optimality_score\": optimality_score\n        }\n        \n    except Exception:\n        return {\"is_valid\": False, \"validation_errors\": [\"Format error in solution data\"], \"optimality_score\": 0.0}"
}
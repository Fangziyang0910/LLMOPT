{
  "problem_id": "set_partitioning_001",
  "metadata": {
    "problem_type": "Set Partitioning Problem",
    "difficulty": "simple"
  },
  "problem_description": "Within the strategic operational framework of a regional healthcare system, a sophisticated resource optimization paradigm requires the methodical allocation of medical specialist teams to provide comprehensive coverage across 5 distinct geographical districts in the most cost-effective manner. The system has access to 15 available specialist teams, each possessing unique cost structures and team coverage capabilities. The comprehensive cost analysis and team coverage assessment reveals the following operational parameters: Team 1 has costs of 10 thousand dollars and provides team coverage for districts 1,2; Team 2 has costs of 6 thousand dollars and provides team coverage for district 1; Team 3 has costs of 12 thousand dollars and provides team coverage for districts 2,3,4; Team 4 has costs of 5 thousand dollars and provides team coverage for district 3; Team 5 has costs of 9 thousand dollars and provides team coverage for districts 4,5; Team 6 has costs of 7 thousand dollars and provides team coverage for district 5; Team 7 has costs of 15 thousand dollars and provides team coverage for districts 1,3,5; Team 8 has costs of 10 thousand dollars and provides team coverage for districts 2,4; Team 9 has costs of 4 thousand dollars and provides team coverage for district 1; Team 10 has costs of 11 thousand dollars and provides team coverage for districts 2,3; Team 11 has costs of 8 thousand dollars and provides team coverage for districts 3,4; Team 12 has costs of 6 thousand dollars and provides team coverage for district 4; Team 13 has costs of 17 thousand dollars and provides team coverage for districts 1,2,5; Team 14 has costs of 9 thousand dollars and provides team coverage for districts 3,5; Team 15 has costs of 7 thousand dollars and provides team coverage for district 5. The healthcare system's strategic optimization methodology seeks to determine the optimal team selection configuration that ensures each district receives exactly one and only one specialist team assignment while minimizing the total costs across all deployed specialist teams.",
  "solution_format_description": "Print the following fields: - selected_teams: selection status for each team. - total_cost: total cost of selected teams.",
  "structured_data": {
    "num_districts": 5,
    "num_teams": 15,
    "costs": [10, 6, 12, 5, 9, 7, 15, 10, 4, 11, 8, 6, 17, 9, 7],
    "team_coverage": [
      [1, 2], 
      [1], 
      [2, 3, 4], 
      [3], 
      [4, 5], 
      [5], 
      [1, 3, 5], 
      [2, 4], 
      [1], 
      [2, 3], 
      [3, 4], 
      [4], 
      [1, 2, 5], 
      [3, 5], 
      [5]
    ]
  },
  "reference_solution": {
    "selected_teams": [0, 0, 0, 0, 0, 0, 0, 1, 1, 0, 0, 0, 0, 1, 0],
    "total_cost": 23
  },
  "solver_code": "from cpmpy import *\nimport json\n\n\nnum_districts = 5\nnum_teams = 15\ncosts = [10, 6, 12, 5, 9, 7, 15, 10, 4, 11, 8, 6, 17, 9, 7]\nteam_coverage = [[1, 2], [1], [2, 3, 4], [3], [4, 5], [5], [1, 3, 5], [2, 4], [1], [2, 3], [3, 4], [4], [1, 2, 5], [3, 5], [5]]\n\n\nmodel = Model()\n\n\nx = boolvar(shape=num_teams, name=\"x\")\n\n\nfor district in range(1, num_districts + 1):\n\n    covering_teams = [j for j in range(num_teams) if district in team_coverage[j]]\n\n    model += sum(x[j] for j in covering_teams) == 1\n\n\ntotal_cost = sum(costs[j] * x[j] for j in range(num_teams))\nmodel.minimize(total_cost)\n\n\nif model.solve():\n\n    selected_teams_binary = [int(x[j].value()) for j in range(num_teams)]\n    total_cost_value = sum(costs[j] for j in range(num_teams) if x[j].value())\n    \n\n    result = {\n        \"selected_teams\": selected_teams_binary,\n        \"total_cost\": total_cost_value\n    }\n    \n\n    print(json.dumps(result))\nelse:\n    print(json.dumps({\"error\": \"No solution found\"}))",
  "evaluation_function": "def evaluate(candidate_solution, structured_data, reference_solution):\n    import json\n    \n\n    try:\n        solution = json.loads(candidate_solution) if isinstance(candidate_solution, str) else candidate_solution\n    except:\n        return {\"is_valid\": False, \"validation_errors\": [\"Invalid JSON format\"], \"optimality_score\": 0.0}\n    \n\n    required_fields = [\"selected_teams\", \"total_cost\"]\n    missing = [f for f in required_fields if solution is None or f not in solution]\n    if missing:\n        return {\"is_valid\": False, \"validation_errors\": [f\"Missing fields: {missing}\"], \"optimality_score\": 0.0}\n    \n\n    try:\n        selected_teams = solution[\"selected_teams\"]\n        total_cost = solution[\"total_cost\"]\n        \n        num_districts = structured_data[\"num_districts\"]\n        num_teams = structured_data[\"num_teams\"]\n        costs = structured_data[\"costs\"]\n        team_coverage = structured_data[\"team_coverage\"]\n        errors = []\n        \n\n        if len(selected_teams) != num_teams:\n            errors.append(f\"selected_teams length mismatch: expected {num_teams}, got {len(selected_teams)}\")\n        \n\n        for i, val in enumerate(selected_teams):\n            if val not in [0, 1]:\n                errors.append(f\"Team {i+1}: invalid binary value {val}, must be 0 or 1\")\n        \n\n        if len(errors) > 0:\n            return {\"is_valid\": False, \"validation_errors\": errors, \"optimality_score\": 0.0}\n        \n\n        for district in range(1, num_districts + 1):\n            covering_count = 0\n            for j in range(num_teams):\n                if selected_teams[j] == 1 and district in team_coverage[j]:\n                    covering_count += 1\n            if covering_count != 1:\n                errors.append(f\"District {district} covered {covering_count} times, expected exactly 1\")\n        \n\n        calculated_cost = sum(costs[j] for j in range(num_teams) if selected_teams[j] == 1)\n        if abs(calculated_cost - total_cost) > 1e-6:\n            errors.append(f\"Cost inconsistency: calculated {calculated_cost}, declared {total_cost}\")\n        \n\n        is_valid = len(errors) == 0\n        if is_valid:\n            optimal_cost = reference_solution[\"total_cost\"]\n            if optimal_cost == 0:\n                optimality_score = 1.0 if total_cost == 0 else 0.0\n            else:\n                gap = abs(optimal_cost - total_cost) / abs(optimal_cost)\n                optimality_score = max(0, 1 - gap)\n        else:\n            optimality_score = 0.0\n        \n        return {\n            \"is_valid\": is_valid,\n            \"validation_errors\": errors,\n            \"optimality_score\": optimality_score\n        }\n        \n    except Exception as e:\n        return {\"is_valid\": False, \"validation_errors\": [\"Format error in solution data\"], \"optimality_score\": 0.0}"
}
{
  "problem_id": "windy_rural_postman_003",
  "metadata": {
    "problem_type": "Windy Rural Postman Problem",
    "difficulty": "hard"
  },
  "problem_description": "A regional power company needs to optimize the inspection route for electrical maintenance teams across 1 main service center and 34 transformer stations in a mountainous area where strong valley winds significantly affect travel efficiency. The maintenance team must start from the main service center station 0, travel along the 43 required power lines that connect essential transformer stations, and return to the service center after completing inspections. Each power line has different travel times depending on travel direction due to wind conditions and terrain challenges. The 43 required power lines that must be inspected are: traveling from station 0 to station 1 takes 8 minutes with wind and 10 minutes against wind; traveling from station 1 to station 2 takes 6 minutes with wind and 7 minutes against wind; traveling from station 2 to station 3 takes 7 minutes with wind and 6 minutes against wind; traveling from station 3 to station 4 takes 5 minutes with wind and 6 minutes against wind; traveling from station 4 to station 5 takes 9 minutes with wind and 11 minutes against wind; traveling from station 5 to station 6 takes 4 minutes with wind and 5 minutes against wind; traveling from station 6 to station 7 takes 8 minutes with wind and 7 minutes against wind; traveling from station 7 to station 8 takes 6 minutes with wind and 7 minutes against wind; traveling from station 8 to station 9 takes 7 minutes with wind and 6 minutes against wind; traveling from station 9 to station 10 takes 5 minutes with wind and 6 minutes against wind; traveling from station 10 to station 11 takes 8 minutes with wind and 7 minutes against wind; traveling from station 11 to station 12 takes 4 minutes with wind and 5 minutes against wind; traveling from station 12 to station 13 takes 6 minutes with wind and 7 minutes against wind; traveling from station 13 to station 14 takes 7 minutes with wind and 6 minutes against wind; traveling from station 14 to station 15 takes 9 minutes with wind and 8 minutes against wind; traveling from station 15 to station 16 takes 5 minutes with wind and 6 minutes against wind; traveling from station 16 to station 17 takes 8 minutes with wind and 7 minutes against wind; traveling from station 17 to station 18 takes 6 minutes with wind and 5 minutes against wind; traveling from station 18 to station 19 takes 7 minutes with wind and 8 minutes against wind; traveling from station 19 to station 20 takes 10 minutes with wind and 9 minutes against wind; traveling from station 20 to station 21 takes 6 minutes with wind and 7 minutes against wind; traveling from station 21 to station 22 takes 8 minutes with wind and 6 minutes against wind; traveling from station 22 to station 23 takes 5 minutes with wind and 7 minutes against wind; traveling from station 23 to station 24 takes 9 minutes with wind and 8 minutes against wind; traveling from station 24 to station 25 takes 7 minutes with wind and 6 minutes against wind; traveling from station 25 to station 26 takes 8 minutes with wind and 9 minutes against wind; traveling from station 26 to station 27 takes 6 minutes with wind and 5 minutes against wind; traveling from station 27 to station 28 takes 7 minutes with wind and 8 minutes against wind; traveling from station 28 to station 29 takes 5 minutes with wind and 6 minutes against wind; traveling from station 29 to station 30 takes 8 minutes with wind and 7 minutes against wind; traveling from station 30 to station 31 takes 6 minutes with wind and 8 minutes against wind; traveling from station 31 to station 32 takes 9 minutes with wind and 7 minutes against wind; traveling from station 32 to station 33 takes 7 minutes with wind and 6 minutes against wind; traveling from station 33 to station 34 takes 8 minutes with wind and 9 minutes against wind; traveling from station 34 to station 0 takes 12 minutes with wind and 10 minutes against wind; traveling from station 1 to station 8 takes 10 minutes with wind and 12 minutes against wind; traveling from station 3 to station 11 takes 8 minutes with wind and 9 minutes against wind; traveling from station 6 to station 15 takes 11 minutes with wind and 10 minutes against wind; traveling from station 9 to station 18 takes 9 minutes with wind and 8 minutes against wind; traveling from station 12 to station 22 takes 7 minutes with wind and 8 minutes against wind; traveling from station 16 to station 26 takes 10 minutes with wind and 9 minutes against wind; traveling from station 20 to station 29 takes 8 minutes with wind and 7 minutes against wind; traveling from station 24 to station 33 takes 9 minutes with wind and 10 minutes against wind. Additionally, the maintenance team can optionally choose to use 30 service access roads to reduce the time spent on repeated travel along the required power lines: traveling from station 0 to station 5 takes 13 minutes with wind and 12 minutes against wind; traveling from station 2 to station 7 takes 10 minutes with wind and 9 minutes against wind; traveling from station 4 to station 10 takes 12 minutes with wind and 11 minutes against wind; traveling from station 1 to station 13 takes 14 minutes with wind and 13 minutes against wind; traveling from station 5 to station 15 takes 11 minutes with wind and 10 minutes against wind; traveling from station 7 to station 17 takes 13 minutes with wind and 12 minutes against wind; traveling from station 8 to station 19 takes 15 minutes with wind and 14 minutes against wind; traveling from station 11 to station 21 takes 12 minutes with wind and 11 minutes against wind; traveling from station 13 to station 23 takes 14 minutes with wind and 13 minutes against wind; traveling from station 15 to station 25 takes 16 minutes with wind and 15 minutes against wind; traveling from station 17 to station 27 takes 13 minutes with wind and 12 minutes against wind; traveling from station 19 to station 29 takes 14 minutes with wind and 13 minutes against wind; traveling from station 21 to station 31 takes 15 minutes with wind and 14 minutes against wind; traveling from station 23 to station 33 takes 12 minutes with wind and 11 minutes against wind; traveling from station 25 to station 34 takes 13 minutes with wind and 12 minutes against wind; traveling from station 0 to station 10 takes 16 minutes with wind and 15 minutes against wind; traveling from station 3 to station 14 takes 14 minutes with wind and 13 minutes against wind; traveling from station 6 to station 18 takes 15 minutes with wind and 14 minutes against wind; traveling from station 9 to station 22 takes 13 minutes with wind and 12 minutes against wind; traveling from station 12 to station 26 takes 16 minutes with wind and 15 minutes against wind; traveling from station 14 to station 28 takes 14 minutes with wind and 13 minutes against wind; traveling from station 18 to station 30 takes 15 minutes with wind and 14 minutes against wind; traveling from station 20 to station 32 takes 13 minutes with wind and 12 minutes against wind; traveling from station 22 to station 34 takes 14 minutes with wind and 13 minutes against wind; traveling from station 2 to station 16 takes 17 minutes with wind and 16 minutes against wind; traveling from station 4 to station 20 takes 15 minutes with wind and 14 minutes against wind; traveling from station 24 to station 31 takes 12 minutes with wind and 11 minutes against wind; traveling from station 27 to station 32 takes 13 minutes with wind and 12 minutes against wind; traveling from station 28 to station 33 takes 14 minutes with wind and 13 minutes against wind; traveling from station 30 to station 34 takes 11 minutes with wind and 10 minutes against wind. The maintenance team wants to find the most efficient route that minimizes total travel time while ensuring all required power lines are inspected at least once in either direction.",
  "solution_format_description": "Print the following fields: - inspection_route: array of transformer station indices representing the complete inspection route. - total_time: total inspection time of the route.",
  "structured_data": {
    "num_stations": 35,
    "required_power_lines": [
      [0, 1, 8, 10], [1, 2, 6, 7], [2, 3, 7, 6], [3, 4, 5, 6],
      [4, 5, 9, 11], [5, 6, 4, 5], [6, 7, 8, 7], [7, 8, 6, 7],
      [8, 9, 7, 6], [9, 10, 5, 6], [10, 11, 8, 7], [11, 12, 4, 5],
      [12, 13, 6, 7], [13, 14, 7, 6], [14, 15, 9, 8], [15, 16, 5, 6],
      [16, 17, 8, 7], [17, 18, 6, 5], [18, 19, 7, 8], [19, 20, 10, 9],
      [20, 21, 6, 7], [21, 22, 8, 6], [22, 23, 5, 7], [23, 24, 9, 8],
      [24, 25, 7, 6], [25, 26, 8, 9], [26, 27, 6, 5], [27, 28, 7, 8],
      [28, 29, 5, 6], [29, 30, 8, 7], [30, 31, 6, 8], [31, 32, 9, 7],
      [32, 33, 7, 6], [33, 34, 8, 9], [34, 0, 12, 10], [1, 8, 10, 12],
      [3, 11, 8, 9], [6, 15, 11, 10], [9, 18, 9, 8], [12, 22, 7, 8],
      [16, 26, 10, 9], [20, 29, 8, 7], [24, 33, 9, 10]
    ],
    "optional_access_roads": [
      [0, 5, 13, 12], [2, 7, 10, 9], [4, 10, 12, 11], [1, 13, 14, 13],
      [5, 15, 11, 10], [7, 17, 13, 12], [8, 19, 15, 14], [11, 21, 12, 11],
      [13, 23, 14, 13], [15, 25, 16, 15], [17, 27, 13, 12], [19, 29, 14, 13],
      [21, 31, 15, 14], [23, 33, 12, 11], [25, 34, 13, 12], [0, 10, 16, 15],
      [3, 14, 14, 13], [6, 18, 15, 14], [9, 22, 13, 12], [12, 26, 16, 15],
      [14, 28, 14, 13], [18, 30, 15, 14], [20, 32, 13, 12], [22, 34, 14, 13],
      [2, 16, 17, 16], [4, 20, 15, 14], [24, 31, 12, 11], [27, 32, 13, 12],
      [28, 33, 14, 13], [30, 34, 11, 10]
    ]
  },
  "reference_solution": {
    "inspection_route": [0, 1, 2, 3, 4, 5, 6, 15, 14, 13, 12, 22, 21, 20, 19, 18, 9, 8, 1, 8, 7, 6, 15, 16, 17, 18, 9, 10, 11, 3, 11, 12, 22, 23, 24, 33, 32, 31, 30, 29, 20, 29, 28, 27, 26, 16, 26, 25, 24, 33, 34, 0], 
    "total_time": 385
  },
  "solver_code": "",
  "evaluation_function": "def evaluate(candidate_solution, structured_data, reference_solution):\n    import json\n    \n    try:\n        solution = json.loads(candidate_solution) if isinstance(candidate_solution, str) else candidate_solution\n    except:\n        return {\"is_valid\": False, \"validation_errors\": [\"Invalid JSON format\"], \"optimality_score\": 0.0}\n    \n    required_fields = [\"inspection_route\", \"total_time\"]\n    missing = [f for f in required_fields if solution is None or f not in solution]\n    if missing:\n        return {\"is_valid\": False, \"validation_errors\": [f\"Missing fields: {missing}\"], \"optimality_score\": 0.0}\n    \n    try:\n        route = solution[\"inspection_route\"]\n        total_time = solution[\"total_time\"]\n        required_power_lines = structured_data[\"required_power_lines\"]\n        optional_access_roads = structured_data[\"optional_access_roads\"]\n        errors = []\n        \n        graph = {}\n        for u, v, time_wind, time_against in required_power_lines + optional_access_roads:\n            if u not in graph:\n                graph[u] = {}\n            if v not in graph:\n                graph[v] = {}\n            graph[u][v] = time_wind\n            graph[v][u] = time_against\n        \n        if len(route) < 2:\n            errors.append(\"Inspection route must contain at least 2 stations\")\n        \n        if route[0] != 0 or route[-1] != 0:\n            errors.append(\"Inspection route must start and end at service center (station 0)\")\n        \n        for i in range(len(route)-1):\n            u, v = route[i], route[i+1]\n            if v not in graph.get(u, {}):\n                errors.append(f\"No power line from station {u} to station {v}\")\n        \n        covered = set()\n        for i in range(len(route)-1):\n            u, v = route[i], route[i+1]\n            covered.add((u, v))\n            covered.add((v, u))\n        \n        for u, v, _, _ in required_power_lines:\n            if (u, v) not in covered and (v, u) not in covered:\n                errors.append(f\"Required power line {u}<->{v} not covered\")\n        \n        actual_time = 0\n        for i in range(len(route)-1):\n            u, v = route[i], route[i+1]\n            actual_time += graph[u][v]\n        \n        if abs(actual_time - total_time) > 1e-6:\n            errors.append(f\"Operation time inconsistency: calculated {actual_time}, declared {total_time}\")\n        \n        if errors:\n            return {\n                \"is_valid\": False,\n                \"validation_errors\": errors,\n                \"optimality_score\": 0.0\n            }\n        \n        optimal_time = reference_solution[\"total_time\"]\n        if optimal_time == 0:\n            optimality_score = 1.0 if total_time == 0 else 0.0\n        else:\n            gap = abs(optimal_time - total_time) / abs(optimal_time)\n            optimality_score = max(0, 1 - gap)\n        \n        return {\n            \"is_valid\": True,\n            \"validation_errors\": [],\n            \"optimality_score\": optimality_score\n        }\n        \n    except Exception as e:\n        return {\"is_valid\": False, \"validation_errors\": [\"Format error in solution data\"], \"optimality_score\": 0.0}"
}
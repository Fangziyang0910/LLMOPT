{
  "problem_id": "graph_coloring_003",
  "metadata": {
    "problem_type": "Graph Coloring Problem",
    "difficulty": "hard"
  },
  "problem_description": "Within the comprehensive strategic operational framework of the National Broadband Infrastructure Authority, an advanced frequency resource optimization paradigm is being deployed for a nationwide fifth-generation wireless backbone network comprising fifty strategically positioned towers distributed across a continental communications infrastructure topology. The authority's advanced network management systems have identified extensive conflict relationship matrices establishing complex mutual exclusivity constraints between geographically proximate tower infrastructure elements exhibiting overlapping interference patterns. The sophisticated spatial-temporal conflict analysis reveals multiple interconnected conflict domains: the primary domain establishes a complete mutual incompatibility topology among towers 1 through 6 forming a fully connected conflict cluster; the secondary domain creates bidirectional conflict patterns between towers 7 through 10 with additional coupling to towers 11 through 16, establishing complex multi-layer conflict relationships; the tertiary domain implements a densely interconnected conflict configuration among towers 11 through 16 with additional cross-domain coupling to towers 8, 9, 10, 7, and 1; the quaternary domain forms linear conflict chains between towers 17 through 22 with bidirectional coupling patterns and additional hierarchical conflict relationships; the fifth domain establishes interconnected conflict topologies among towers 23 through 28 with complex multi-dimensional coupling patterns; the sixth domain creates linear conflict sequences between towers 29 through 34 with additional cross-cluster conflict connections; the seventh domain implements a comprehensive conflict hub centered at tower 35 with extensive coupling to towers 17, 21, 24, 27, 30, and 33, establishing a star-like conflict topology; the eighth domain demonstrates complete mutual incompatibility among towers 36 through 40 forming a fully connected conflict cluster; the ninth domain creates bidirectional conflict patterns between towers 41 through 45 with additional coupling to towers 46 through 50, establishing complex multi-layer conflict relationships; the tenth domain implements comprehensive cross-domain coupling mechanisms connecting tower 36 to tower 41, tower 41 to tower 46, tower 17 to tower 36, tower 22 to tower 41, tower 25 to tower 46, tower 30 to tower 47, and tower 34 to tower 50; the eleventh domain establishes complex linear conflict propagation sequences connecting tower 7 to tower 17 to tower 27 to tower 37 to tower 47 to tower 3, and tower 8 to tower 18 to tower 28 to tower 38 to tower 48 to tower 5, with additional coupling sequences tower 5 to tower 15 to tower 25 to tower 2; the twelfth domain implements comprehensive cross-cluster coupling mechanisms connecting tower 1 to tower 35, tower 3 to tower 41, tower 5 to tower 46, tower 2 to tower 36, tower 4 to tower 50, tower 6 to tower 47, tower 7 to tower 40, tower 10 to tower 45, tower 13 to tower 42, and tower 16 to tower 48; the thirteenth domain establishes interconnected hierarchical conflict relationships among towers 17 through 22, 20 through 25, 23 through 28, 26 through 31, and 29 through 34, with additional cross-domain coupling patterns connecting tower 18 to tower 24, tower 21 to tower 27, tower 19 to tower 30, and tower 33 to tower 19; the fourteenth domain implements complex multi-dimensional conflict coupling patterns among towers 37 through 42, 38 through 43, 39 through 44, and 40 through 45, with reciprocal coupling mechanisms connecting tower 46 to tower 36, tower 47 to tower 41, tower 48 to tower 37, tower 49 to tower 42, and tower 50 to tower 38; the fifteenth domain establishes comprehensive cross-cluster interference networks connecting tower 1 to tower 17 and tower 25, tower 2 to tower 19 and tower 27, tower 3 to tower 21 and tower 29, tower 4 to tower 23 and tower 31, tower 5 to tower 18 and tower 26, and tower 6 to tower 20 and tower 28; the sixteenth domain implements intricate bidirectional conflict coupling mechanisms among towers 7 through 16 with complex cross-domain interference patterns connecting tower 7 to tower 12 and tower 14, tower 8 to tower 13 and tower 15, tower 9 to tower 16 and tower 11, tower 10 to tower 11 and tower 13, tower 11 to tower 16, and tower 12 to tower 15, with additional reciprocal coupling relationships connecting tower 14 to tower 7 and tower 15 to tower 8. Each tower infrastructure component must be allocated exactly one frequency assignment, represented by a positive integer designation. The authority's optimization methodology seeks to determine the minimal cardinality set of distinct frequency assignments that satisfies all conflict relationship constraints while maximizing spectral utilization efficiency and optimizing nationwide network resource deployment parameters.",
  "solution_format_description": "Print the following fields: - tower_frequencies: frequency assignment for each tower. - num_frequencies: total number of different frequencies used.",
  "structured_data": {
    "num_towers": 50,
    "num_conflict_pairs": 151,
    "conflict_pairs": [
      [
        1,
        2
      ],
      [
        1,
        3
      ],
      [
        1,
        4
      ],
      [
        1,
        5
      ],
      [
        1,
        6
      ],
      [
        2,
        3
      ],
      [
        2,
        4
      ],
      [
        2,
        5
      ],
      [
        2,
        6
      ],
      [
        3,
        4
      ],
      [
        3,
        5
      ],
      [
        3,
        6
      ],
      [
        4,
        5
      ],
      [
        4,
        6
      ],
      [
        5,
        6
      ],
      [
        7,
        8
      ],
      [
        7,
        9
      ],
      [
        7,
        10
      ],
      [
        7,
        11
      ],
      [
        7,
        12
      ],
      [
        7,
        13
      ],
      [
        7,
        14
      ],
      [
        7,
        15
      ],
      [
        7,
        16
      ],
      [
        8,
        9
      ],
      [
        8,
        10
      ],
      [
        8,
        11
      ],
      [
        8,
        12
      ],
      [
        8,
        13
      ],
      [
        8,
        14
      ],
      [
        8,
        15
      ],
      [
        8,
        16
      ],
      [
        9,
        10
      ],
      [
        9,
        11
      ],
      [
        9,
        12
      ],
      [
        9,
        13
      ],
      [
        9,
        14
      ],
      [
        9,
        15
      ],
      [
        9,
        16
      ],
      [
        10,
        11
      ],
      [
        10,
        12
      ],
      [
        10,
        13
      ],
      [
        10,
        14
      ],
      [
        10,
        15
      ],
      [
        10,
        16
      ],
      [
        11,
        12
      ],
      [
        11,
        13
      ],
      [
        11,
        14
      ],
      [
        11,
        15
      ],
      [
        11,
        16
      ],
      [
        12,
        13
      ],
      [
        12,
        14
      ],
      [
        12,
        15
      ],
      [
        12,
        16
      ],
      [
        13,
        14
      ],
      [
        13,
        15
      ],
      [
        13,
        16
      ],
      [
        14,
        15
      ],
      [
        14,
        16
      ],
      [
        15,
        16
      ],
      [
        17,
        18
      ],
      [
        17,
        19
      ],
      [
        17,
        20
      ],
      [
        17,
        21
      ],
      [
        17,
        22
      ],
      [
        17,
        24
      ],
      [
        17,
        27
      ],
      [
        17,
        30
      ],
      [
        18,
        19
      ],
      [
        18,
        20
      ],
      [
        18,
        21
      ],
      [
        18,
        22
      ],
      [
        19,
        20
      ],
      [
        19,
        21
      ],
      [
        19,
        22
      ],
      [
        20,
        21
      ],
      [
        20,
        22
      ],
      [
        21,
        22
      ],
      [
        21,
        24
      ],
      [
        21,
        27
      ],
      [
        21,
        30
      ],
      [
        23,
        24
      ],
      [
        23,
        25
      ],
      [
        23,
        26
      ],
      [
        23,
        27
      ],
      [
        23,
        28
      ],
      [
        24,
        25
      ],
      [
        24,
        26
      ],
      [
        24,
        27
      ],
      [
        24,
        28
      ],
      [
        24,
        30
      ],
      [
        25,
        26
      ],
      [
        25,
        27
      ],
      [
        25,
        28
      ],
      [
        26,
        27
      ],
      [
        26,
        28
      ],
      [
        27,
        28
      ],
      [
        27,
        30
      ],
      [
        29,
        30
      ],
      [
        29,
        31
      ],
      [
        29,
        32
      ],
      [
        29,
        33
      ],
      [
        29,
        34
      ],
      [
        30,
        31
      ],
      [
        30,
        32
      ],
      [
        30,
        33
      ],
      [
        30,
        34
      ],
      [
        31,
        32
      ],
      [
        31,
        33
      ],
      [
        31,
        34
      ],
      [
        32,
        33
      ],
      [
        32,
        34
      ],
      [
        33,
        34
      ],
      [
        36,
        37
      ],
      [
        36,
        38
      ],
      [
        36,
        39
      ],
      [
        36,
        40
      ],
      [
        37,
        38
      ],
      [
        37,
        39
      ],
      [
        37,
        40
      ],
      [
        37,
        41
      ],
      [
        37,
        42
      ],
      [
        38,
        39
      ],
      [
        38,
        40
      ],
      [
        38,
        41
      ],
      [
        38,
        42
      ],
      [
        39,
        40
      ],
      [
        39,
        41
      ],
      [
        39,
        42
      ],
      [
        40,
        41
      ],
      [
        40,
        42
      ],
      [
        41,
        42
      ],
      [
        41,
        43
      ],
      [
        41,
        44
      ],
      [
        41,
        45
      ],
      [
        42,
        43
      ],
      [
        42,
        44
      ],
      [
        42,
        45
      ],
      [
        43,
        44
      ],
      [
        43,
        45
      ],
      [
        44,
        45
      ],
      [
        46,
        47
      ],
      [
        46,
        48
      ],
      [
        46,
        49
      ],
      [
        46,
        50
      ],
      [
        47,
        48
      ],
      [
        47,
        49
      ],
      [
        47,
        50
      ],
      [
        48,
        49
      ],
      [
        48,
        50
      ],
      [
        49,
        50
      ]
    ]
  },
  "reference_solution": {
    "tower_frequencies": [2, 6, 1, 3, 4, 5, 8, 4, 9, 1, 3, 6, 2, 7, 5, 10, 7, 5, 3, 2, 1, 4, 3, 4, 6, 1, 2, 5, 6, 3, 4, 5, 1, 2, 1, 3, 7, 5, 1, 2, 4, 3, 7, 1, 5, 4, 6, 3, 1, 2],
    "num_frequencies": 10
  },
  "solver_code": "from cpmpy import *\nimport json\n\nnum_towers = 50\nconflict_pairs = [\n    [1, 2],     [1, 3],     [1, 4],     [1, 5],     [1, 6],     [2, 3],     [2, 4],     [2, 5],\n    [2, 6],     [3, 4],     [3, 5],     [3, 6],     [4, 5],     [4, 6],     [5, 6],     [7, 8],\n    [7, 9],     [7, 10],     [7, 11],     [7, 12],     [7, 13],     [7, 14],     [7, 15],     [7, 16],\n    [8, 9],     [8, 10],     [8, 11],     [8, 12],     [8, 13],     [8, 14],     [8, 15],     [8, 16],\n    [9, 10],     [9, 11],     [9, 12],     [9, 13],     [9, 14],     [9, 15],     [9, 16],     [10, 11],\n    [10, 12],     [10, 13],     [10, 14],     [10, 15],     [10, 16],     [11, 12],     [11, 13],     [11, 14],\n    [11, 15],     [11, 16],     [12, 13],     [12, 14],     [12, 15],     [12, 16],     [13, 14],     [13, 15],\n    [13, 16],     [14, 15],     [14, 16],     [15, 16],     [17, 18],     [17, 19],     [17, 20],     [17, 21],\n    [17, 22],     [17, 24],     [17, 27],     [17, 30],     [18, 19],     [18, 20],     [18, 21],     [18, 22],\n    [19, 20],     [19, 21],     [19, 22],     [20, 21],     [20, 22],     [21, 22],     [21, 24],     [21, 27],\n    [21, 30],     [23, 24],     [23, 25],     [23, 26],     [23, 27],     [23, 28],     [24, 25],     [24, 26],\n    [24, 27],     [24, 28],     [24, 30],     [25, 26],     [25, 27],     [25, 28],     [26, 27],     [26, 28],\n    [27, 28],     [27, 30],     [29, 30],     [29, 31],     [29, 32],     [29, 33],     [29, 34],     [30, 31],\n    [30, 32],     [30, 33],     [30, 34],     [31, 32],     [31, 33],     [31, 34],     [32, 33],     [32, 34],\n    [33, 34],     [36, 37],     [36, 38],     [36, 39],     [36, 40],     [37, 38],     [37, 39],     [37, 40],\n    [37, 41],     [37, 42],     [38, 39],     [38, 40],     [38, 41],     [38, 42],     [39, 40],     [39, 41],\n    [39, 42],     [40, 41],     [40, 42],     [41, 42],     [41, 43],     [41, 44],     [41, 45],     [42, 43],\n    [42, 44],     [42, 45],     [43, 44],     [43, 45],     [44, 45],     [46, 47],     [46, 48],     [46, 49],\n    [46, 50],     [47, 48],     [47, 49],     [47, 50],     [48, 49],     [48, 50],     [49, 50]\n]\n\nmodel = Model()\ntower_frequencies = intvar(1, num_towers, shape=num_towers)\n\nfor u, v in conflict_pairs:\n    model += tower_frequencies[u-1] != tower_frequencies[v-1]\n\nnum_frequencies = intvar(1, num_towers)\nfor i in range(num_towers):\n    model += num_frequencies >= tower_frequencies[i]\nmodel.minimize(num_frequencies)\n\nif model.solve():\n    result = {\n        \"tower_frequencies\": [int(tower_frequencies[i].value()) for i in range(num_towers)],\n        \"num_frequencies\": int(num_frequencies.value())\n    }\n    print(json.dumps(result))\nelse:\n    print(\"No solution found\")\n",
  "evaluation_function": "def evaluate(candidate_solution, structured_data, reference_solution):\n    import json\n    \n    try:\n        solution = json.loads(candidate_solution) if isinstance(candidate_solution, str) else candidate_solution\n    except:\n        return {\"is_valid\": False, \"validation_errors\": [\"Invalid JSON format\"], \"optimality_score\": 0.0}\n    \n    required_fields = [\"tower_frequencies\", \"num_frequencies\"]\n    missing = [f for f in required_fields if solution is None or f not in solution]\n    if missing:\n        return {\"is_valid\": False, \"validation_errors\": [f\"Missing fields: {missing}\"], \"optimality_score\": 0.0}\n    \n    try:\n        tower_frequencies = solution[\"tower_frequencies\"]\n        num_frequencies = solution[\"num_frequencies\"]\n        num_towers = structured_data[\"num_towers\"]\n        conflict_pairs = structured_data[\"conflict_pairs\"]\n        errors = []\n        \n        if len(tower_frequencies) != num_towers:\n            errors.append(f\"tower_frequencies length mismatch: expected {num_towers}, got {len(tower_frequencies)}\")\n        \n        for i, freq in enumerate(tower_frequencies):\n            if not isinstance(freq, int) or freq < 1:\n                errors.append(f\"Invalid frequency for tower {i+1}: {freq}. Frequencies must be positive integers.\")\n        \n        violation_count = 0\n        max_violations_to_report = 10\n        for u, v in conflict_pairs:\n            if 1 <= u <= num_towers and 1 <= v <= num_towers:\n                if tower_frequencies[u-1] == tower_frequencies[v-1]:\n                    violation_count += 1\n                    if len(errors) < max_violations_to_report:\n                        errors.append(f\"Conflicting towers {u} and {v} share the same frequency {tower_frequencies[u-1]}\")\n        if violation_count > max_violations_to_report:\n            errors.append(f\"... and {violation_count - max_violations_to_report} more constraint violations\")\n        \n        if len(tower_frequencies) > 0:\n            actual = set(tower_frequencies)\n            actual_num = len(actual)\n            if num_frequencies != actual_num:\n                errors.append(f\"Frequency count inconsistency: declared {num_frequencies}, actual {actual_num}\")\n        \n        if len(errors) == 0:\n            optimal = reference_solution[\"num_frequencies\"]\n            if optimal == 0:\n                optimality_score = 1.0 if num_frequencies == 0 else 0.0\n            else:\n                gap = abs(optimal - num_frequencies) / abs(optimal)\n                optimality_score = max(0, 1 - gap)\n        else:\n            optimality_score = 0.0\n        \n        return {\n            \"is_valid\": len(errors) == 0,\n            \"validation_errors\": errors,\n            \"optimality_score\": optimality_score\n        }\n        \n    except Exception:\n        return {\"is_valid\": False, \"validation_errors\": [\"Format error in solution data\"], \"optimality_score\": 0.0}"
}
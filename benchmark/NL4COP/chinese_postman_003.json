{
  "problem_id": "chinese_postman_003",
  "metadata": {
    "problem_type": "Chinese Postman Problem",
    "difficulty": "hard"
  },
  "problem_description": "A public transportation authority needs to plan an efficient inspection route for maintenance vehicles that must check all road segments in an extensive city network. The network has 20 intersections connected by 53 road segments, each requiring safety inspection. The vehicle starts from the maintenance depot at intersection 0 and must inspect every road before returning to the starting point. The specific road information is the road connecting intersections 10 and 6 is 1.00 kilometers long and requires 46.0 minutes for inspection, the road connecting intersections 6 and 11 is 5.39 kilometers long and requires 73.0 minutes for inspection, the road connecting intersections 11 and 8 is 3.61 kilometers long and requires 47.0 minutes for inspection, the road connecting intersections 8 and 9 is 6.32 kilometers long and requires 40.0 minutes for inspection, the road connecting intersections 9 and 4 is 3.16 kilometers long and requires 12.0 minutes for inspection, the road connecting intersections 4 and 17 is 6.08 kilometers long and requires 84.0 minutes for inspection, the road connecting intersections 17 and 7 is 3.61 kilometers long and requires 4.0 minutes for inspection, the road connecting intersections 7 and 12 is 5.00 kilometers long and requires 62.0 minutes for inspection, the road connecting intersections 12 and 3 is 8.25 kilometers long and requires 26.0 minutes for inspection, the road connecting intersections 3 and 15 is 5.83 kilometers long and requires 43.0 minutes for inspection, the road connecting intersections 15 and 14 is 5.00 kilometers long and requires 17.0 minutes for inspection, the road connecting intersections 14 and 5 is 6.71 kilometers long and requires 40.0 minutes for inspection, the road connecting intersections 5 and 0 is 2.83 kilometers long and requires 75.0 minutes for inspection, the road connecting intersections 0 and 19 is 3.16 kilometers long and requires 45.0 minutes for inspection, the road connecting intersections 19 and 1 is 4.00 kilometers long and requires 97.0 minutes for inspection, the road connecting intersections 1 and 16 is 5.10 kilometers long and requires 31.0 minutes for inspection, the road connecting intersections 16 and 2 is 2.24 kilometers long and requires 68.0 minutes for inspection, the road connecting intersections 2 and 18 is 3.61 kilometers long and requires 95.0 minutes for inspection, the road connecting intersections 18 and 13 is 6.40 kilometers long and requires 14.0 minutes for inspection, the road connecting intersections 13 and 10 is 5.39 kilometers long and requires 58.0 minutes for inspection, the road connecting intersections 10 and 16 is 6.32 kilometers long and requires 20.0 minutes for inspection, the road connecting intersections 16 and 4 is 9.85 kilometers long and requires 61.0 minutes for inspection, the road connecting intersections 4 and 13 is 7.07 kilometers long and requires 51.0 minutes for inspection, the road connecting intersections 13 and 6 is 5.83 kilometers long and requires 93.0 minutes for inspection, the road connecting intersections 6 and 19 is 5.00 kilometers long and requires 33.0 minutes for inspection, the road connecting intersections 19 and 10 is 5.10 kilometers long and requires 77.0 minutes for inspection, the road connecting intersections 10 and 14 is 3.00 kilometers long and requires 80.0 minutes for inspection, the road connecting intersections 14 and 8 is 4.00 kilometers long and requires 91.0 minutes for inspection, the road connecting intersections 8 and 15 is 1.00 kilometers long and requires 54.0 minutes for inspection, the road connecting intersections 15 and 1 is 7.07 kilometers long and requires 36.0 minutes for inspection, the road connecting intersections 1 and 2 is 5.00 kilometers long and requires 96.0 minutes for inspection, the road connecting intersections 2 and 19 is 4.12 kilometers long and requires 99.0 minutes for inspection, the road connecting intersections 19 and 17 is 6.32 kilometers long and requires 8.0 minutes for inspection, the road connecting intersections 17 and 3 is 7.21 kilometers long and requires 42.0 minutes for inspection, the road connecting intersections 3 and 18 is 6.32 kilometers long and requires 38.0 minutes for inspection, the road connecting intersections 18 and 10 is 3.16 kilometers long and requires 71.0 minutes for inspection, the road connecting intersections 10 and 2 is 6.40 kilometers long and requires 77.0 minutes for inspection, the road connecting intersections 2 and 13 is 7.07 kilometers long and requires 41.0 minutes for inspection, the road connecting intersections 13 and 11 is 5.00 kilometers long and requires 85.0 minutes for inspection, the road connecting intersections 11 and 17 is 6.00 kilometers long and requires 2.0 minutes for inspection, the road connecting intersections 17 and 6 is 2.24 kilometers long and requires 84.0 minutes for inspection, the road connecting intersections 6 and 3 is 5.00 kilometers long and requires 1.0 minutes for inspection, the road connecting intersections 3 and 5 is 9.49 kilometers long and requires 93.0 minutes for inspection, the road connecting intersections 5 and 15 is 6.32 kilometers long and requires 10.0 minutes for inspection, the road connecting intersections 15 and 0 is 5.66 kilometers long and requires 97.0 minutes for inspection, the road connecting intersections 0 and 1 is 4.24 kilometers long and requires 41.0 minutes for inspection, the road connecting intersections 1 and 12 is 5.66 kilometers long and requires 40.0 minutes for inspection, the road connecting intersections 12 and 6 is 6.40 kilometers long and requires 64.0 minutes for inspection, the road connecting intersections 6 and 14 is 3.16 kilometers long and requires 36.0 minutes for inspection, the road connecting intersections 14 and 18 is 3.61 kilometers long and requires 5.0 minutes for inspection, the road connecting intersections 18 and 5 is 5.83 kilometers long and requires 74.0 minutes for inspection, the road connecting intersections 5 and 12 is 1.41 kilometers long and requires 7.0 minutes for inspection, and the road connecting intersections 12 and 10 is 7.07 kilometers long and requires 65.0 minutes for inspection. Each road must be completely inspected when first traversed, and the vehicle may need to travel along some roads multiple times (without additional inspection) to complete an efficient closed route. How should the authority plan the route to minimize the total cost of travel distance and inspection time?",
  "solution_format_description": "Print the following fields: - route: sequence of intersections visited. - total_cost: total distance and inspection time cost.",
  "structured_data": {
  "num_intersections": 20,
  "streets": [
    [10, 6, 1.00, 46.0],
    [6, 11, 5.39, 73.0],
    [11, 8, 3.61, 47.0],
    [8, 9, 6.32, 40.0],
    [9, 4, 3.16, 12.0],
    [4, 17, 6.08, 84.0],
    [17, 7, 3.61, 4.0],
    [7, 12, 5.00, 62.0],
    [12, 3, 8.25, 26.0],
    [3, 15, 5.83, 43.0],
    [15, 14, 5.00, 17.0],
    [14, 5, 6.71, 40.0],
    [5, 0, 2.83, 75.0],
    [0, 19, 3.16, 45.0],
    [19, 1, 4.00, 97.0],
    [1, 16, 5.10, 31.0],
    [16, 2, 2.24, 68.0],
    [2, 18, 3.61, 95.0],
    [18, 13, 6.40, 14.0],
    [13, 10, 5.39, 58.0],
    [10, 16, 6.32, 20.0],
    [16, 4, 9.85, 61.0],
    [4, 13, 7.07, 51.0],
    [13, 6, 5.83, 93.0],
    [6, 19, 5.00, 33.0],
    [19, 10, 5.10, 77.0],
    [10, 14, 3.00, 80.0],
    [14, 8, 4.00, 91.0],
    [8, 15, 1.00, 54.0],
    [15, 1, 7.07, 36.0],
    [1, 2, 5.00, 96.0],
    [2, 19, 4.12, 99.0],
    [19, 17, 6.32, 8.0],
    [17, 3, 7.21, 42.0],
    [3, 18, 6.32, 38.0],
    [18, 10, 3.16, 71.0],
    [10, 2, 6.40, 77.0],
    [2, 13, 7.07, 41.0],
    [13, 11, 5.00, 85.0],
    [11, 17, 6.00, 2.0],
    [17, 6, 2.24, 84.0],
    [6, 3, 5.00, 1.0],
    [3, 5, 9.49, 93.0],
    [5, 15, 6.32, 10.0],
    [15, 0, 5.66, 97.0],
    [0, 1, 4.24, 41.0],
    [1, 12, 5.66, 40.0],
    [12, 6, 6.40, 64.0],
    [6, 14, 3.16, 36.0],
    [14, 18, 3.61, 5.0],
    [18, 5, 5.83, 74.0],
    [5, 12, 1.41, 7.0],
    [12, 10, 7.07, 65.0]
  ]
},
  "reference_solution": {
    "route": [0, 1, 12, 10, 2, 13, 11, 17, 6, 14, 18, 5, 12, 6, 3, 5, 15, 0, 19, 17, 3, 18, 10, 14, 8, 15, 1, 2, 19, 10, 16, 4, 13, 6, 19, 1, 16, 2, 18, 13, 10, 6, 11, 8, 9, 4, 17, 7, 12, 3, 15, 14, 5, 0],
    "total_cost": 3018.62
  },
  "solver_code": "",
  "evaluation_function": "def evaluate(candidate_solution, structured_data, reference_solution):\n    import json\n    \n    try:\n        solution = json.loads(candidate_solution) if isinstance(candidate_solution, str) else candidate_solution\n    except:\n        return {\"is_valid\": False, \"validation_errors\": [\"Invalid JSON format\"], \"optimality_score\": 0.0}\n    \n    required_fields = [\"route\", \"total_cost\"]\n    missing = [f for f in required_fields if solution is None or f not in solution]\n    if missing:\n        return {\"is_valid\": False, \"validation_errors\": [f\"Missing fields: {missing}\"], \"optimality_score\": 0.0}\n    \n    try:\n        route = solution[\"route\"]\n        total_cost = solution[\"total_cost\"]\n        streets = structured_data[\"streets\"]\n        num_intersections = structured_data[\"num_intersections\"]\n        errors = []\n        \n        if not isinstance(route, list) or len(route) < 2:\n            errors.append(\"Route must be a non-empty list\")\n        \n        if route[0] != route[-1]:\n            errors.append(\"Route must start and end at the same intersection\")\n        \n        for node in route:\n            if not isinstance(node, int) or node < 0 or node >= num_intersections:\n                errors.append(f\"Invalid intersection: {node}\")\n        \n        covered_streets = set()\n        for i in range(len(route) - 1):\n            u = route[i]\n            v = route[i + 1]\n            \n            found = False\n            for j, (su, sv, _, _) in enumerate(streets):\n                if (su == u and sv == v) or (su == v and sv == u):\n                    covered_streets.add(j)\n                    found = True\n                    break\n            \n            if not found:\n                errors.append(f\"No street connects {u} and {v}\")\n        \n        if len(covered_streets) != len(streets):\n            errors.append(f\"Not all streets covered: {len(covered_streets)}/{len(streets)}\")\n        \n        if len(errors) > 0:\n            optimality_score = 0.0\n        else:\n            optimal_cost = reference_solution[\"total_cost\"]\n            if optimal_cost == 0:\n                optimality_score = 1.0 if total_cost == 0 else 0.0\n            else:\n                gap = abs(optimal_cost - total_cost) / abs(optimal_cost)\n                optimality_score = max(0, 1 - gap)\n        \n        return {\n            \"is_valid\": len(errors) == 0,\n            \"validation_errors\": errors,\n            \"optimality_score\": optimality_score\n        }\n        \n    except Exception as e:\n        return {\"is_valid\": False, \"validation_errors\": [\"Format error in solution data\"], \"optimality_score\": 0.0}"
}